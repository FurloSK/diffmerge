<?xml version="1.0" encoding="UTF-8"?>
<?oxygen RNGSchema="http://www.oasis-open.org/docbook/xml/5.0/rng/docbook.rng" type="xml"?>
<!-- 2013/05/29 We get a few warnings on Windows from the
		namespace and docbook v4 vs v5 changes,
		but I think they are harmless.  See the
		section on "Processing DocBook V5.0" in
		http://docbook.org/docs/howto
		-->
<book 
    xmlns="http://docbook.org/ns/docbook"
    xmlns:xlink="http://www.w3.org/1999/xlink"
    version="5.0">
  <title>SourceGear DiffMerge</title>
  <subtitle>User Manual</subtitle>
  <info>
    <legalnotice>

<para>SourceGear DiffMerge is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.</para>
<para>SourceGear DiffMerge is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.</para>
<para>You should have received a copy of the GNU General Public License along with this program. If not, see <link xlink:href="https://www.gnu.org/licenses">https://www.gnu.org/licenses</link>.</para>

      <para><trademark class="registered">SourceGear</trademark> is a registered trademark of SourceGear LLC.</para>
      <para><trademark class="trade">SourceGear DiffMerge</trademark> is a trademark of SourceGear LLC.</para>
      <para>Copyright (C) 2003-2024 SourceGear LLC. All rights reserved.</para>
    </legalnotice>
  </info>

  <!-- ================================================================ -->
  
  <chapter xml:id="chapter_introduction">
    <title>Introduction</title>
    <para>DiffMerge is an application to visually compare and merge files 
    and folders on Windows, OS X, and Linux.</para>
    <itemizedlist>
      <listitem>
	<para><emphasis role="bold">Diff:</emphasis>
	Graphically shows the changes between two files.
	Includes intra-line highlighting and full support for editing.</para>
      </listitem>
      <listitem>
	<para><emphasis role="bold">Merge:</emphasis>
	Graphically shows the changes between 3 files.
	Allows automatic merging (when safe to do so) and full control
	over editing the resulting file.</para>
      </listitem>
      <listitem>
	<para><emphasis role="bold">Folder Diff:</emphasis>
	Performs a side-by-side comparison of 2 folders, showing which files
	are only present in one file or the other, as well as file pairs which
	are identical, equivalent or different.</para>
      </listitem>
      <listitem>
	<para><emphasis role="bold">Windows Explorer/Shell Integration:</emphasis>
	Right-click on any two files or folders in Windows Explorer to diff
	them immediately.</para>
      </listitem>
      <listitem>
	<para><emphasis role="bold">Configurable:</emphasis>
	Rulesets and options provide for customized appearance and behavior.</para>
      </listitem>
      <listitem>
	<para><emphasis role="bold">International:</emphasis>
	DiffMerge is a UNICODE-based application and can import files in a
	wide range of character encodings.</para>
      </listitem>
      <listitem>
	<para><emphasis role="bold">Cross-platform:</emphasis>
	Identical feature set on Windows, OS X, and Linux:
	</para>
	<mediaobject>
	  <imageobject>
	    <imagedata fileref="images/img_file_window__windows.png"/>
	  </imageobject>
	</mediaobject>
	<para/>
	<mediaobject>
	  <imageobject>
	    <imagedata fileref="images/img_file_window__mac.png"/>
	  </imageobject>
	</mediaobject>
	<para/>
	<mediaobject>
	  <imageobject>
	    <imagedata fileref="images/img_file_window__ubuntu.png"/>
	  </imageobject>
	</mediaobject>
	<para/>
	<mediaobject>
	  <imageobject>
	    <imagedata fileref="images/img_file_window__fedora.png"/>
	  </imageobject>
	</mediaobject>
      </listitem>
    </itemizedlist>
  </chapter>

  <!-- ================================================================ -->

  <chapter xml:id="chapter_filediffmergewindows">
    <title>File Diff/Merge Windows</title>
    <section xml:id="sec__file__filewindowtypes">
      <title>File Window Types</title>
      <para>There are two types of file windows – <emphasis role="bold">File Diff Windows</emphasis>
	and <emphasis role="bold">File Merge Windows</emphasis>.</para>
      <section xml:id="sec__file__filewindowtypes__diff">
	<title>File Diff Windows</title>
	<para>The first is a two-way view showing the differences between two files or two versions of
	  the same file. You can
	  use this window to see the changes side-by-side. And you can edit the file on the right,
	  either interactively as you would with a normal editor or by applying patches/changes
	  from the version on the left. You can use this window, for example, when looking at the
	  revision history of a file to see the changes between two revisions.</para>
	<mediaobject>
          <imageobject>
            <imagedata fileref="images/img_file_window_2.png"/>
          </imageobject>
	</mediaobject>
      </section>
      <section xml:id="sec__file__filewindowtypes__merge">
	<title>File Merge Windows</title>
	<para>The second is a three-way window that shows the differences between three files; typically
	  this is a common ancestor (in the middle) and two branches that have independently evolved (on
	  the left and right).
	  You can use this window to see the changes side-by-side-by-side. You can edit the center
	  file and merge in changes from both branches, creating a common/unified version.</para>
	<mediaobject>
          <imageobject>
            <imagedata fileref="images/img_file_window_3.png"/>
          </imageobject>
	</mediaobject>
      </section>
    </section>

    <section xml:id="sec__file__opening">
      <title>Opening File Windows</title>
      <para>You can open a File Diff Window by selecting <emphasis role="bold">File | Open Diff Window</emphasis>
	from the menu.  This raises the <emphasis role="bold">Select Files to Compare Dialog</emphasis> and
	allows you to type or browse to the pathnames of the files you wish to compare:</para>
      <mediaobject>
        <imageobject>
          <imagedata fileref="images/img_select_files_to_compare_1.png"/>
        </imageobject>
      </mediaobject>
      <para/>
      <para>If a <emphasis role="bold">Swap</emphasis> button is provided, it will swap the left and right pathnames.  Keep in
	mind that only the right/bottom file will be editable.</para>
      <para/>
      <para>You can open a File Merge Window by selecting <emphasis role="bold">File | Open Merge Window</emphasis>
	from the menu.  This raises the <emphasis role="bold">Select Files to Merge Dialog</emphasis>:</para>
      <mediaobject>
        <imageobject>
          <imagedata fileref="images/img_select_files_to_compare_2.png"/>
        </imageobject>
      </mediaobject>
      <para/>
      <para>Note: in both cases, if the set of files selected are already open in an existing window, 
	that window will be raised rather than creating a new, duplicate window.</para>
    </section>

    <section xml:id="sec__file__filewindowparts">
      <title>Parts of a File Window</title>
      <para>Here is an example of a File Merge Window.</para>
      <mediaobject>
        <imageobject>
          <imagedata fileref="images/img_file_window_parts.png"/>
        </imageobject>
      </mediaobject>

      <section xml:id="sec__file__filewindowparts_filepanels">
	<title>File Panels</title>
	<para>In the center of File Diff and Merge Windows DiffMerge 
	  displays 2 or 3 files in a series of <emphasis role="bold">File Panels</emphasis>.
	  Each panel looks like a basic text editor window with a few differences.</para>

	<!--		  <mediaobject>
			  <imageobject>
			    <imagedata fileref="images/img_file_window_basic_1.png"/>
			  </imageobject>
			  </mediaobject>
		  <para/>
		   <para/>
		  -->
	<mediaobject>
	  <imageobject>
	    <imagedata fileref="images/img_file_window_basic_2.png"/>
	  </imageobject>
	</mediaobject>

	<itemizedlist>
	  <listitem><para><emphasis role="bold">A Panel Label</emphasis>
	      is drawn above the panel.  This may contain the pathname
	      of the file or a symbolic name describing the version of
	      the file.</para></listitem>
	  <listitem><para><emphasis role="bold">Line Numbers</emphasis>
	      are optionally displayed next to each line of the 
	      file.</para></listitem>
	  <listitem><para><emphasis role="bold">Invisible characters</emphasis>
	      such as whitespace and line terminators
	      are optionally displayed using special symbols.</para></listitem>
	  <listitem><para><emphasis role="bold">Bold Underlined Text</emphasis>
	      is use to indicate edited text.</para></listitem>
	  <listitem><para><emphasis role="bold">An Edited Line Indicator (*)</emphasis>
	      is drawn in the line number area for edited lines.</para></listitem>
	  <listitem><para><emphasis role="bold">A Void</emphasis> is
	      drawn using a shaded, diagonal hatch pattern
	      to indicate missing lines.
	      This is shown in
	      <link linkend="sec__file__showingchanges">Showing Changes</link>.</para></listitem>
	  <listitem><para><emphasis role="bold">Changes</emphasis> are drawn in
	      color.  This is explained in 
	      <link linkend="sec__file__showingchanges">Showing Changes</link>.</para></listitem>
	  <listitem><para><emphasis role="bold">A Gap</emphasis> is drawn to
	      indicate hidden lines.  This is illustrated in the
	      <link linkend="sec__file__displaymode">Display Mode</link>
	      and <link linkend="sec__file__omit_hide">Hiding Omitted Lines</link>.</para></listitem>
	</itemizedlist>
      </section>

      <section xml:id="sec__file__filewindowparts_glancebar">
	<title>The Glance Bar</title>
	<para>The <emphasis role="bold">Glance Bar</emphasis> gives a visual
	  summary of the "shape" of the changes in the files.
	  The bar is a scaled representation of the files.</para>
	<informaltable frame="none">
	  <tgroup cols="2">
	    <colspec colnum="1" colwidth="1in" colsep="0"/>
	    <tbody>
	      <row>
		<entry valign="top"><mediaobject><imageobject><imagedata fileref="images/img_file_window_glance.png"/></imageobject></mediaobject></entry>
		<entry valign="top">
		  <itemizedlist>
		    <listitem>
		      <para>Colored lines/blocks are drawn to indicate changes in the files; the coloring
			and the shape blocks reflect the color and shape of the actual changes.</para>
		    </listitem>
		    <listitem>
		      <para>Black bars are drawn on the sides of the glance bar to show the
			current scroll position of the files.</para>
		    </listitem>
		    <listitem>
		      <para>As the mouse moves over the Glance Bar, the corresponding line numbers
			from the files are shown in the Status Bar.  A star <code>*</code> is used
			when the corresponding line is a Void.</para>
		    </listitem>
		    <listitem>
		      <para>You may click on the glance bar to scroll the file panels to
			that position.</para>
		    </listitem>
		  </itemizedlist>
		</entry>
	      </row>
	    </tbody>
	  </tgroup>
	</informaltable>
      </section>

      <section xml:id="sec__file__filewindowparts_viewselector">
	<title>The View Selector</title>
        <para>The <emphasis role="bold">View Selector</emphasis> enables you to select between the 
	  <emphasis role="bold">Reference View</emphasis> and the
	  <emphasis role="bold">Edit View</emphasis>.</para>
	<mediaobject>
	  <imageobject>
	    <imagedata fileref="images/img_file_window_viewselector.png"/>
	  </imageobject>
	</mediaobject>
        <para>The <emphasis role="bold">Reference View</emphasis> is a static view of the
          changes in the files as originally read from disk. In this view the files are
          considered read-only. You may scroll around and view the differences and you may
          copy things to the clipboard -- but you cannot modify the files. </para>
        <para>This mode can be useful in various situations, such as when you want to see
          the changes between two historical versions of a file. </para>
        <para>The <emphasis role="bold">Edit View</emphasis> is an interactive editor and
          live difference viewer. It enables you to make changes to the center panel in a
          File Merge Window and the right panel in a
          File Diff Window. As you edit, your changes
          are highlighted, the files are re-compared in real-time, and their changes are
          displayed.</para>
        <para>The View Selector is only present when
          editing is permitted on the files.  When not present, the window only shows the
          Reference View and treats all files in the window as read-only.</para>
      </section>
      
      <section xml:id="sec__file__filewindowparts_rulesetindicator">
	<title>Ruleset Indicator</title>
	<para>The <emphasis role="bold">Active Ruleset Indicator</emphasis> shows the
          current <emphasis role="bold">Ruleset</emphasis> in use in this window.  The
          Ruleset provides customizable rules for comparing and displaying file content (such as
          whitespace handling and character encodings) that are based upon file type.</para>
	<mediaobject>
	  <imageobject>
	    <imagedata fileref="images/img_file_window_rulesetindicator.png"/>
	  </imageobject>
	</mediaobject>
	<para>Generally, the Ruleset is automatically selected based upon the file suffix.
	  It may be changed using the <link linkend="dlg_chooseruleset">File | Change Ruleset...</link> command.</para>
      </section>

      <section xml:id="sec__file__filewindowparts_encodingindicator">
	<title>Character Encoding Indicator</title>
	<para>The <emphasis role="bold">Character Encoding Indicator</emphasis> shows
	  the character encoding of the files.</para>
	<para>If both or all 3 files have the same character encoding, the value is listed once.</para>
	<mediaobject>
	  <imageobject>
	    <imagedata fileref="images/img_file_window_encodingindicator_1.png"/>
	  </imageobject>
	</mediaobject>
	<para>If each file has a different encoding, each is listed separately.  DiffMerge
	  compares the files <emphasis role="bold">after</emphasis> the files have been
	  converted from the original character encoding into UNICODE.  So files that are
	  in different encodings can be compared.</para>
	<mediaobject>
	  <imageobject>
	    <imagedata fileref="images/img_file_window_encodingindicator_2.png"/>
	  </imageobject>
	</mediaobject>
	<para>If a file contained a UNICODE Byte Order Mark (BOM), a <code>(BOM)</code>
	  will be shown.</para>
      </section>

      <section xml:id="sec__file__filewindowparts_splitter">
	<title>The Splitter</title>
	<para>By default, DiffMerge shows the file panels side-by-side with vertical “splitters” between
          them. This mode allows you to easily see and match up the corresponding lines in the
          files. However, you may have to scroll horizontally to see parts of a line.</para>
	<para/>
	<mediaobject>
          <imageobject>
            <imagedata fileref="images/img_file_window_splitter_v.png"/>
          </imageobject>
	</mediaobject>
	<para>DiffMerge also lets you view the files panels one above another with horizontal “splitters”
          between them. In this mode, it may be a little difficult to see the line correspondence,
          but you should be able to see the entire line in each file. In this mode, the order of
          the files is the same: editing takes place in the bottom panel in a File Diff Window
          and the center panel in a File Merge Window.</para>
	<para/>
	<mediaobject>
          <imageobject>
            <imagedata fileref="images/img_file_window_splitter_h.png"/>
          </imageobject>
	</mediaobject>
	<para>You may drag the splitter to change the relative size of the file panels.
	  Double-click on it to restore it to the center.</para>
      </section>

      <section xml:id="sec__file__filewindowparts_toolbar">
	<title>The Toolbar</title>
	<para>The toolbar above the File Diff/Merge Windows presents the following commands. Some appear
          only in File Merge Windows.</para>
	<mediaobject>
          <imageobject>
            <imagedata fileref="images/img_file_window_toolbar_0.png"/>
          </imageobject>
	</mediaobject>
	<para/>
	<para>From left to right, these are:</para>
	<informaltable frame="none">
	  <tgroup cols="2">
	    <colspec colnum="1" colwidth="1.5in" colsep="0" rowsep="0"/>
	    <colspec colnum="2" colsep="0" rowsep="0"/>
	    <tbody>
	      <row>
		<entry valign="top"><mediaobject><imageobject><imagedata fileref="images/img_file_window_toolbar_1.png"/></imageobject></mediaobject></entry>
		<entry valign="top"><para><link linkend="sec__file__displaymode">View | Show All</link>,
		    <link linkend="sec__file__displaymode">View | Show Differences Only</link>, and
		    <link linkend="sec__file__displaymode">View | Show Differences with Context</link>
		    set the line display mode.</para></entry>
	      </row>
	      <row><entry><para/></entry></row>
	      <row>
		<entry valign="top"><mediaobject><imageobject><imagedata fileref="images/img_file_window_toolbar_2.png"/></imageobject></mediaobject></entry>
		<entry valign="top"><para><link linkend="sec__file__filewindowparts_filepanels">View | Show Line Numbers</link> and
		    <link linkend="sec__file__filewindowparts_filepanels">View | Show Invisibles</link>
		    control the visibility of line numbers and whitespace and line terminator characters.</para></entry>
	      </row>
	      <row><entry><para/></entry></row>
	      <row>
		<entry valign="top"><mediaobject><imageobject><imagedata fileref="images/img_file_window_toolbar_3.png"/></imageobject></mediaobject></entry>
		<entry valign="top"><para><link linkend="sec__file__filewindowparts_splitter">View | Split Windows Vertically</link> and
		    <link linkend="sec__file__filewindowparts_splitter">View | Split Windows Horizontally</link>
		    control whether the file panels are side-by-side or above-and-below.</para></entry>
	      </row>
	      <row><entry><para/></entry></row>
	      <row>
		<entry valign="top"><mediaobject><imageobject><imagedata fileref="images/img_file_window_toolbar_4.png"/></imageobject></mediaobject></entry>
		<entry valign="top"><para><emphasis role="bold">File | Save File</emphasis></para></entry>
	      </row>
	      <row><entry><para/></entry></row>
	      <row>
		<entry valign="top"><mediaobject><imageobject><imagedata fileref="images/img_file_window_toolbar_5.png"/></imageobject></mediaobject></entry>
		<entry valign="top"><para><emphasis role="bold">Edit | Cut</emphasis>,
		    <emphasis role="bold">Edit | Copy</emphasis>,
		    and
		    <emphasis role="bold">Edit | Paste</emphasis></para></entry>
	      </row>
	      <row><entry><para/></entry></row>
	      <row>
		<entry valign="top"><mediaobject><imageobject><imagedata fileref="images/img_file_window_toolbar_6.png"/></imageobject></mediaobject></entry>
		<entry valign="top"><para xml:id="toolbar_buttons_undoredo">
		    <emphasis role="bold">Edit | Undo</emphasis> and
		    <emphasis role="bold">Edit | Redo</emphasis></para></entry>
	      </row>
	      <row><entry><para/></entry></row>
	      <row>
		<entry valign="top"><mediaobject><imageobject><imagedata fileref="images/img_file_window_toolbar_7.png"/></imageobject></mediaobject></entry>
		<entry valign="top"><para xml:id="toolbar_buttons_patch">
		    <link linkend="sec__file__patchoperations">Apply Change from Left</link> and
		    <link linkend="sec__file__patchoperations">Apply Change from Right</link>
		    apply the current change to the editable file.</para></entry>
	      </row>
	      <row><entry><para/></entry></row>
	      <row>
		<entry valign="top"><mediaobject><imageobject><imagedata fileref="images/img_file_window_toolbar_8.png"/></imageobject></mediaobject></entry>
		<entry valign="top"><para xml:id="toolbar_buttons_nextprev_change">
		    <link linkend="sec__file__movingaround_nextprev_change">Edit | Next Change</link> and
		    <link linkend="sec__file__movingaround_nextprev_change">Edit | Previous Change</link>
		    move the cursor to the next and previous changes.</para></entry>
	      </row>
	      <row><entry><para/></entry></row>
	      <row>
		<entry valign="top"><mediaobject><imageobject><imagedata fileref="images/img_file_window_toolbar_9.png"/></imageobject></mediaobject></entry>
		<entry valign="top"><para xml:id="toolbar_buttons_nextprevious_conflict">
		    <link linkend="sec__file__movingaround_nextprev_conflict">Edit | Next Conflict</link> and
		    <link linkend="sec__file__movingaround_nextprev_conflict">Edit | Previous Conflict</link>
		    move the cursor to the next and previous conflicts.</para></entry>
	      </row>
	      <row><entry><para/></entry></row>
	      <row>
		<entry valign="top"><mediaobject><imageobject><imagedata fileref="images/img_file_window_toolbar_10.png"/></imageobject></mediaobject></entry>
		<entry valign="top"><para xml:id="toolbar_buttons_automerge">
		    <link linkend="sec__file__editing_automerge">Edit | Merge to Center</link>
		    performs Auto-Merge.</para></entry>
	      </row>
	    </tbody>
	  </tgroup>
	</informaltable>
      </section>
    </section>
    
    <section xml:id="sec__file__showingchanges">
      <title>Showing Changes</title>

      <section xml:id="sec__file__showingchanges_detaillevel">
        <title>Detail Level</title>
        <para>DiffMerge has two Detail Levels: 
	  <link linkend="sec__file__showingchanges_detaillevel_lines">Lines Only</link> and
          <link linkend="sec__file__showingchanges_detaillevel_lineschars">Lines and Characters</link>.</para>
	
	<section xml:id="sec__file__showingchanges_detaillevel_lines">
	  <title>Lines Only</title>
          <para>In <emphasis role="bold">Lines Only</emphasis> mode, DiffMerge only performs difference
            analysis line-by-line. Changes are indicated based upon equality of the entire line.</para>
	  <para>Lines are colored without intra-line highlighting.</para>
	  <para>For example, in a File Diff Window:</para>
	  <mediaobject>
            <imageobject>
	      <imagedata fileref="images/img_file_window_diffs_1.png"/>
            </imageobject>
	  </mediaobject>
	  <para>And in a File Merge Window:</para>
	  <mediaobject>
            <imageobject>
	      <imagedata fileref="images/img_file_window_diffs_3.png"/>
            </imageobject>
	  </mediaobject>
	  <para/>
	</section>
	
	<section xml:id="sec__file__showingchanges_detaillevel_lineschars">
	  <title>Lines and Characters</title>
	  <para>In <emphasis role="bold">Lines and Characters</emphasis> mode, DiffMerge performs
            line-by-line difference analysis and then within each change block it performs 
	    intra-line difference analysis.</para>
	  <para>Lines are colored using the overall line status color and then
            intra-line highlights are added.</para>
	  <para>For example, in a File Diff Window:</para>
	  <mediaobject>
            <imageobject>
	      <imagedata fileref="images/img_file_window_diffs_2.png"/>
            </imageobject>
	  </mediaobject>
	  <para>And in a File Merge Window:</para>
	  <mediaobject>
            <imageobject>
	      <imagedata fileref="images/img_file_window_diffs_4.png"/>
            </imageobject>
	  </mediaobject>
	</section>
      </section>

      <section xml:id="sec__file__showingchanges_highlightingchanges">
	<title>Highlighting Changes</title>
	<para><emphasis role="bold">Highlighed Changes</emphasis> are surrounded by a dotted line.
	  When a change is highlighted, it may be acted upon by the 
	  <link linkend="toolbar_buttons_patch">Apply Change...</link> commands and the custom
	  right-mouse context menus.
	  You can also use the <link linkend="toolbar_buttons_nextprev_change">Next/Previous Change</link>
	  commands to jump between changes.</para>
	<mediaobject>
          <imageobject>
            <imagedata fileref="images/img_file_window_context_1.png"/>
          </imageobject>
	</mediaobject>
      </section>

      <section xml:id="sec__file__showingchanges_aggregation">
        <title>Aggregating Changes</title>
        <para>As a precaution, adjacent or overlapping changes are aggregated into a single
          change. Usually this produces a conflict (depending on the individual types of changes
          in the grouping). When you’re merging multiple files, these usually require your
          attention because DiffMerge cannot automatically determine what to do with
          them.</para>
        <para>For example, in the figure below, "Line 1" was added to both branches (in the left
          and right panels) and "Line 2" was deleted from the right panel. So what should the
          merge result look like?</para>
        <mediaobject>
          <imageobject>
            <imagedata fileref="images/img_file_window_aggregation_1.png"/>
          </imageobject>
        </mediaobject>
        <para>To access an individual line change within a block of changes, hold down the
          Control key while using the left or right mouse buttons to select the desired
          line.</para>
        <mediaobject>
          <imageobject>
            <imagedata fileref="images/img_file_window_aggregation_2.png"/>
          </imageobject>
        </mediaobject>
      </section>

      <section xml:id="sec__file__showingchanges_marker">
	<title>Manual Alignment Markers</title>
	<para>You can add <emphasis role="bold">Manual Alignment Markers</emphasis> to force
	  the alignment of a set of lines in the difference analysis.  Markers are drawn as
	  a pair of dashed lines between two lines of text.</para>
	<para>For example, in the following example a block of text has been moved.  DiffMerge
	  chose to match up the <code>BEGIN_EVENT_TABLE...</code> block and treat the <code>#define...</code>
	  block as a delete and an insert.</para>
        <mediaobject>
          <imageobject>
	    <imagedata fileref="images/img_file_window_marker_1.png"/>
          </imageobject>
        </mediaobject>
	<para>If you want to force the <code>#define...</code> blocks to line up, you could
	  insert a marker as shown here.</para>
        <mediaobject>
          <imageobject>
	    <imagedata fileref="images/img_dlg_manualalignmentmarker.png"/>
          </imageobject>
        </mediaobject>
	<para>This causes the other block of code to appear as
	  a delete and an insert.</para>
        <mediaobject>
          <imageobject>
	    <imagedata fileref="images/img_file_window_marker_2.png"/>
          </imageobject>
        </mediaobject>
	
	<para>
	  You can use the 
	  <emphasis role="bold">View | Delete All Manual Alignment Markers</emphasis>
	  menu command to to delete all of the Manual Alignment Markers in the window.
	</para>

      </section>

      <section xml:id="sec__file__displaymode">
	<title>The Line Display Mode</title>
	<para>The <emphasis role="bold">Line Display Mode</emphasis> allows you to 
	hide lines that are not currently of interest.
	When lines are hidden, a single line <emphasis role="bold">Gap</emphasis> is drawn.</para>
	<para>The Line Display Mode can be set to one of the following:</para>
	<informaltable frame="none">
	  <tgroup cols="2">
	    <colspec colnum="1" colwidth="0.5in" colsep="0" rowsep="0"/>
	    <colspec colnum="2" colsep="0" rowsep="0"/>
	    <tbody>
	      <row>
		<entry valign="top"><mediaobject><imageobject><imagedata fileref="images/img_file_window_toolbar_11.png"/></imageobject></mediaobject></entry>
		<entry valign="top"><para><emphasis role="bold">View | Show All.</emphasis>
		This mode shows all lines in the files.</para>
		</entry>
	      </row>
	      <row>
		<entry valign="top"><mediaobject><imageobject><imagedata fileref="images/img_file_window_toolbar_12.png"/></imageobject></mediaobject></entry>
		<entry valign="top"><para><emphasis role="bold">View | Show Differences Only.</emphasis>
		This mode shows only the changes in the files.  Identical lines are hidden.
		For example:</para>
		</entry>
	      </row>
	      <row>
		<entry><para/></entry>
		<entry valign="top">
		  <mediaobject>
		    <imageobject>
		      <imagedata fileref="images/img_file_window_modediffonly.png"/>
		    </imageobject>
		  </mediaobject>
		</entry>
	      </row>
	      <row>
		<entry valign="top"><mediaobject><imageobject><imagedata fileref="images/img_file_window_toolbar_13.png"/></imageobject></mediaobject></entry>
		<entry valign="top"><para><emphasis role="bold">View | Show Differences with Context.</emphasis>
		This mode shows changes with upto 3 lines of context around each.  Identical
		lines not adjacent to a change are hidden.</para>
		</entry>
	      </row>
	    </tbody>
	  </tgroup>
	</informaltable>
	
	<note>
	  <para>The last 2 modes are only available in the 
	  <link linkend="sec__file__filewindowparts_viewselector">Reference View</link>.</para>
	</note>
      </section>

      <section xml:id="sec__file__omit">
	<title>Omitted Lines</title>
	<para>A Ruleset can declare that certain lines be 
	<emphasis role="bold">omitted</emphasis> from the 
	difference analysis.  These lines are treated as if
	they were not present in the file during the analysis.
	For example, you might use this feature to ignore
	differences caused by RCS Keyword Expansion.</para>
	<para>Normally, these lines are drawn in a special gray color.
	For example, when we add the Regular Expression 
	<code>&#x005C;&#x0024;Revision:.*&#x005C;&#x0024;</code>,
	we can see that the revision lines were omitted from
	the analysis.</para>
	<mediaobject>
	  <imageobject>
	    <imagedata fileref="images/img_file_window_lomit_revision_1.png"/>
	  </imageobject>
	</mediaobject>
	<para/>

	<para xml:id="sec__file__omit_hide">
	  The <emphasis role="bold">View | Hide Omitted Lines</emphasis>
	  menu option causes these lines to be hidden and a
	  <emphasis role="bold">Gap</emphasis> drawn instead.
	</para>
	<mediaobject>
	  <imageobject>
	    <imagedata fileref="images/img_file_window_lomit_revision_2.png"/>
	  </imageobject>
	</mediaobject>

	<note>
	  <para>The Hide Omitted Lines feature is only available in the 
	  <link linkend="sec__file__filewindowparts_viewselector">Reference View</link>
	  when you have the
	  <emphasis role="bold">Display Mode</emphasis> set to
	  <emphasis role="bold">Show All</emphasis>.</para>
	</note>
      </section>

      <section xml:id="sec__file__hideunimportantdifferences">
	<title>Hiding Unimportant Differences</title>
	<para>A Ruleset can also describe the various <emphasis role="bold">Contexts</emphasis>
	in a file and classify them as <emphasis role="bold">Important</emphasis> or
	<emphasis role="bold">Unimportant</emphasis>.  For example, changes within a
	source code comment are not as important as changes in the code itself or in
	a string literal.  Furthermore, whitespace changes in C source code are not as
	important as whitespace changes within a string literal.</para>
	<para>When the Detail Level is set to 
	<link linkend="sec__file__showingchanges_detaillevel_lineschars">
	  Lines and Characters</link>,
	  DiffMerge classifies all changes as either important or unimportant using
	  the information in the Ruleset.  Normally, DiffMerge draws these unimportant
	  changes in a dimmer color.  In the following example, compare the coloring
	  of the “CHANGED” and “YOUR/MY” changes in the file panel and in the glance
	bar.  Also, the Change Stats shows that there are 3 changes.</para>
	<mediaobject>
	  <imageobject>
	    <imagedata fileref="images/img_file_window_hideunimportant_1.png"/>
	  </imageobject>
	</mediaobject>
	<para>When the <link linkend="sec__file__displaymode">Display Mode</link> is set to
	<emphasis role="bold">Show All</emphasis>, the
	<emphasis role="bold">View | Hide Unimportant Differences</emphasis>
	command causes DiffMerge to draw them as if they were identical (and with a
	slightly dimmer color for intra-line character changes).  In the following
	example, the 2 comment lines are no longer highlighted.  And the word
	“CHANGED” is dimmed slightly.  
	The glance bar no longer shows a block for the change.
	The whitespace before “sz” is no longer highlighted.
	The Change Stats shows that there are 2 important changes and 1 unimportant
	change (not being shown).</para>
	<mediaobject>
	  <imageobject>
	    <imagedata fileref="images/img_file_window_hideunimportant_2.png"/>
	  </imageobject>
	</mediaobject>
	<para>If we set the <link linkend="sec__file__displaymode">Display Mode</link>
	to <emphasis role="bold">Show Differences Only</emphasis>,
	we see only the 3 changes with Gaps between them.</para>
	<mediaobject>
	  <imageobject>
	    <imagedata fileref="images/img_file_window_hideunimportant_3.png"/>
	  </imageobject>
	</mediaobject>
	<para>If we now turn on 
	<emphasis role="bold">View | Hide Unimportant Differences</emphasis>, the
	unimportant changes are not drawn at all.  Again, the Change Stats
	indicates that 1 unimportant change is being hidden.</para>
	<mediaobject>
	  <imageobject>
	    <imagedata fileref="images/img_file_window_hideunimportant_4.png"/>
	  </imageobject>
	</mediaobject>
      </section>

      <section xml:id="sec__file__changeruleset">
	<title>Change Ruleset</title>
	<para>
	  The <emphasis role="bold">File | Change Ruleset...</emphasis> menu command
	  allows you to select a different Ruleset for the current window.
	  This raises the <emphasis role="bold">Choose Ruleset Dialog</emphasis>.</para>
	<mediaobject xml:id="dlg_chooseruleset">
	  <imageobject>
	    <imagedata fileref="images/img_dlg_chooseruleset.png"/>
	  </imageobject>
	</mediaobject>
	<para>
	  The currently selected Ruleset is displayed in the status bar.
	</para>
      </section>
    </section>

    <section xml:id="sec__file__export">
      <title>Exporting File Differences</title>
      <para>
	The commands under the
	<emphasis role="bold">Export | File Diffs</emphasis>
	menu will export the differences between the 2 file versions
	to a file.
      </para>
      <para>
	There are several output options, such as "Text" vs "HTML" mode
	and "Unified" vs "Traditional" vs "Side-by-Side" formats, but in
	all cases:
      </para>
      <itemizedlist>
	<listitem>
	  The <emphasis role="bold">current view</emphasis>
	  (Reference or Edit) is exported
	  and if the Edit View is chosen and it has unsaved edits, those
	  changes will be included in the output.
	</listitem>
	<listitem>
	  The <emphasis role="bold">current Ruleset</emphasis>
	  and the settings for: 
	  <emphasis role="bold">Show/Hide Unimportant</emphasis>,
	  <emphasis role="bold">Show/Hide Omitted</emphasis>,
	  and
	  <emphasis role="bold">Tab Size</emphasis>
	  are respected.
	</listitem>
	<listitem>
	  When exporting in "HTML" mode, intra-line highlighting will
	  be shown if the <emphasis role="bold">Detail Level</emphasis>
	  is set to Lines and Chars.
	</listitem>
	<listitem>
	  These Export commands always write to the destination, even
	  if there are no differences to report.
	  <emphasis>
	    This differs from the command line interface which for
	    historical reasons only writes to the destination file
	    when there are differences to report.
	  </emphasis>
	</listitem>
      </itemizedlist>


      <para><emphasis role="bold">Export | File Diffs | Unified</emphasis></para>
      <para>
	Writes the file differences to a "Text" or "HTML" file 
	in a format <emphasis>similar</emphasis> to the
	industry standard "unified" format.
	For example:
      </para>
      <mediaobject>
	<imageobject>
	  <imagedata fileref="images/img_export_file_diffs_unified_html.png"/>
	</imageobject>
      </mediaobject>
      <para>
	<emphasis>
	  Note:
	  DiffMerge extends the industry standard format to allow for
	  hidden and omitted lines, so our "Text" mode output, while
	  providing you with additional information, may confuse tools
	  like "patch".
	</emphasis>
      </para>


      <para><emphasis role="bold">Export | File Diffs | Traditional</emphasis></para>
      <para>
	Writes the file differences to a "Text" or "HTML" file
	in the traditional "diff" format.
	For example:
      </para>
      <mediaobject>
	<imageobject>
	  <imagedata fileref="images/img_export_file_diffs_traditional_html.png"/>
	</imageobject>
      </mediaobject>


      <para><emphasis role="bold">Export | File Diffs | Side-by-Side</emphasis></para>
      <para>
	Writes the file differences to a "HTML" file
	in a side-by-side format similar to how
	DiffMerge displays them in a window.
	For example:
      </para>
      <mediaobject>
	<imageobject>
	  <imagedata fileref="images/img_export_file_diffs_sxs_html.png"/>
	</imageobject>
      </mediaobject>
      <para>
	Side-by-side HTML output also respects the 
	<emphasis role="bold">View | ShowView All</emphasis>,
	<emphasis role="bold">View | Differences Only</emphasis>,
	and
	<emphasis role="bold">View | Differences with Context</emphasis>
	settings, so you can see as much of the 2 files as you want.
      </para>
    </section>



    <section xml:id="sec__file__editing">
      <title>File Editing</title>
      <para>File Diff and Merge Windows only allow 1 of the files in the set to be edited.
	This is called the <emphasis role="bold">Editable Panel</emphasis>.
	This is the file in the right panel in a File Diff Window and the center panel
	in a File Merge Window on the <link linkend="sec__file__filewindowparts_viewselector">Edit View</link>.</para>
      <para>DiffMerge enables two types of editing: <emphasis role="bold">Interactive
          Editing</emphasis> and <emphasis role="bold">Patching</emphasis>.</para>

      <section xml:id="sec__file__interactiveediting">
        <title>Interactive Editing</title>
        <para>The term <emphasis role="bold">Interactive Editing</emphasis> refers
	  to the normal editing
          operations found in most text editors and includes inserting/deleting text with the
          keyboard and mouse and the standard cut/copy/paste clipboard operations.</para>
      </section>

      <section xml:id="sec__file__patchoperations">
        <title>Patching</title>
        <para>The term <emphasis role="bold">Patching</emphasis> refers to the various
	  commands that let you apply a change to the Editable Panel using the
	  content of the other panel(s).</para>
	<para>These commands are based upon concept of a 
	  <link linkend="sec__file__showingchanges_highlightingchanges">Highlighted Change</link>.</para>
	<para>With a change highlighted, you can use the right-mouse context menu
	  to select an action.</para>
	<mediaobject>
          <imageobject>
            <imagedata fileref="images/img_file_window_context_1.png"/>
          </imageobject>
	</mediaobject>
	<para/>

	<para><emphasis role="bold">Patching Verbs</emphasis></para>

	<para>
	  The content of the context menu will vary depending on the type of
	  the change or conflict, which panel you click on, and whether you have
	  a File Diff or File Merge window.
	  All context menu patching commands are variations of one of the
	  following verbs:
	</para>
	<informaltable frame="none">
	  <tgroup cols="2">
	    <colspec colnum="1" colwidth="1in" colsep="0" rowsep="0"/>
	    <colspec colnum="2" colsep="0" rowsep="0"/>
	    <tbody>
	      <row>
		<entry valign="top"><para><emphasis role="bold">Insert</emphasis></para></entry>
		<entry valign="top"><para>This option inserts content from the source panel 
		into the <emphasis role="bold">Void</emphasis> in the editable panel.</para>
		</entry>
	      </row>
	      <row><entry><para/></entry></row>
	      <row>
		<entry valign="top"><para><emphasis role="bold">Replace</emphasis></para></entry>
		<entry valign="top"><para>This option replaces the content in the editable panel
		with the content from the source panel.</para>
		</entry>
	      </row>
	      <row><entry><para/></entry></row>
	      <row>
		<entry valign="top"><para><emphasis role="bold">Delete</emphasis></para></entry>
		<entry valign="top"><para>This option deletes the content in the editable panel.</para>
		</entry>
	      </row>
	      <row><entry><para/></entry></row>
	      <row>
		<entry valign="top"><para><emphasis role="bold">Prepend</emphasis></para></entry>
		<entry valign="top"><para>This option inserts the source content before the
		existing content in the editable panel.</para>
		</entry>
	      </row>
	      <row><entry><para/></entry></row>
	      <row>
		<entry valign="top"><para><emphasis role="bold">Append</emphasis></para></entry>
		<entry valign="top"><para>This option inserts the source content after the
		existing content in the editable panel.</para>
		</entry>
	      </row>
	    </tbody>
	  </tgroup>
	</informaltable>

	<para><emphasis role="bold">The Default Action</emphasis></para>

	<para xml:id="sec__file__editing_defaultaction">
	  Most of the time, the first item in
	  the context menu will be labeled with “<code>(default)</code>”.  This is
	  the <emphasis role="bold">Default Action</emphasis>.
	</para>
	<informaltable frame="none">
	  <tgroup cols="2">
	    <colspec colnum="1" colwidth="1in" colsep="0" rowsep="0"/>
	    <colspec colnum="2" colsep="0" rowsep="0"/>
	    <tbody>
	      <row>
		<entry valign="top"><mediaobject><imageobject><imagedata fileref="images/img_file_window_toolbar_7.png"/></imageobject></mediaobject></entry>
		<entry valign="top"><para>To apply the default action, you can <emphasis role="bold">shift-right-click</emphasis>
		on the change or use one of the <emphasis role="bold">Apply Change...</emphasis> commands.</para>
		</entry>
	      </row>
	    </tbody>
	  </tgroup>
	</informaltable>
	<para>For conflicts, there may not be a default action.</para>
      </section>

      <section xml:id="sec__file__editing_automerge">
        <title>Merge to Center Panel (Auto-Merge)</title>
	<informaltable frame="none">
	  <tgroup cols="2">
	    <colspec colnum="1" colwidth="1in" colsep="0" rowsep="0"/>
	    <colspec colnum="2" colsep="0" rowsep="0"/>
	    <tbody>
	      <row>
		<entry valign="top"><mediaobject><imageobject><imagedata fileref="images/img_file_window_toolbar_10.png"/></imageobject></mediaobject></entry>
		<entry valign="top"><para>The <emphasis role="bold">Merge to Center Panel</emphasis> command
		    automatically applies the <link linkend="sec__file__editing_defaultaction">Default Action</link>
		    for all of the non-conflicting changes in a File Merge Window.
		    The goal of Auto-Merge is to automatically take care of the easy changes
		    so that you can focus on the conflicts.</para></entry>
	      </row>
	    </tbody>
	  </tgroup>
	</informaltable>
        <para>The complete auto-merge is performed as a batch (in 1 transaction)
	  and may be undone using the <emphasis role="bold">Undo</emphasis> command.</para>
        <para>After the Auto-Merge command completes, the
	  <emphasis role="bold">Auto-Merge Results</emphasis> dialog displays a
	  report on what changes were made, from where they came, and finally a
	  notification about what conflicts could not be merged. </para>
        <mediaobject>
          <imageobject>
            <imagedata fileref="images/img_dlg_automergeresults.png"/>
          </imageobject>
        </mediaobject>
        <note>
          <para>It is strongly recommended that if you wish to use Auto-Merge you use it
	    <emphasis role="bold">BEFORE</emphasis> making any other edits in the window.
	    This prevents Auto-Merge from possibly reverting some of your edits.</para>
	  <para>Also, after Auto-Merge has been applied to a window, it is disabled. This is
	    to prevent Auto-Merge from being used twice and possibly reverting some edits
	    made by the first Auto-Merge.</para>
        </note>
        <para/>
      </section>

      <section xml:id="sec__file__editing_undoredo">
        <title>Undo/Redo</title>
	<informaltable frame="none">
	  <tgroup cols="2">
	    <colspec colnum="1" colwidth="1in" colsep="0" rowsep="0"/>
	    <colspec colnum="2" colsep="0" rowsep="0"/>
	    <tbody>
	      <row>
		<entry valign="top"><mediaobject><imageobject><imagedata fileref="images/img_file_window_toolbar_6.png"/></imageobject></mediaobject></entry>
		<entry valign="top"><para>DiffMerge features an unlimited Undo/Redo
		    so that it is possible to undo changes all the way back to the initial state.</para></entry>
	      </row>
	    </tbody>
	  </tgroup>
	</informaltable>
      </section>
    </section>

    <section xml:id="sec__file__movingaround">
      <title>Moving Around within Files</title>
      <para>DiffMerge offers a number of ways to move around within files.</para>

      <para>
	<emphasis role="bold">Edit | Find...</emphasis>
	and 
	<emphasis role="bold">Edit | Go To Line...</emphasis>
      </para>

      <para>
	These commands cause the
	<emphasis role="bold">Find Panel</emphasis>
	to appear at the top of the File Window.
	The Find Panel will let you search for text or jump to a
	particular line in the file.
	This panel can stay visible or can be dismissed at any time.
      </para>
      <mediaobject>
	<imageobject>
	  <imagedata fileref="images/img_findpanel.png"/>
	</imageobject>
      </mediaobject>
      <para>
	This panel replaces the <emphasis role="bold">Find Dialog</emphasis>
	and <emphasis role="bold">Go To Line Dialog</emphasis>
	found in previous versions of DiffMerge.
      </para>

      <para><emphasis role="bold">Edit | Use Selection for Find</emphasis></para>

      <para>
	This command
	can be used within a file window to directly set the
	<emphasis>find-string</emphasis> to the current selection
	for a subsequent <emphasis role="bold">Find Next</emphasis> or
	<emphasis role="bold">Find Previous</emphasis> commands without
	raising the Find Panel.
      </para>

      <para>
	<emphasis role="bold">Edit | Find Next"</emphasis>
	and
	<emphasis role="bold">Edit | Find Previous"</emphasis>
      </para>

      <para>
	These commands repeat the last search without raising the Find Panel.
      </para>

      <para xml:id="sec__file__movingaround_nextprev_change">
	<emphasis role="bold">Edit | Next Change</emphasis>
	and
	<emphasis role="bold">Edit | Previous Change</emphasis>
      </para>

      <informaltable frame="none">
	<tgroup cols="2">
	  <colspec colnum="1" colwidth="1in" colsep="0" rowsep="0"/>
	  <colspec colnum="2" colsep="0" rowsep="0"/>
	  <tbody>
	    <row>
	      <entry valign="top"><mediaobject><imageobject><imagedata fileref="images/img_file_window_toolbar_8.png"/></imageobject></mediaobject></entry>
	      <entry valign="top">
		<para>
		  These commands enable you to quickly jump between changes in the files.
		</para>
	      </entry>
	    </row>
	  </tbody>
	</tgroup>
      </informaltable>

      <para xml:id="sec__file__movingaround_nextprev_conflict">
	<emphasis role="bold">Edit | Next Conflict</emphasis>
	and
	<emphasis role="bold">Edit | Previous Conflict</emphasis>
      </para>

      <informaltable frame="none">
	<tgroup cols="2">
	  <colspec colnum="1" colwidth="1in" colsep="0" rowsep="0"/>
	  <colspec colnum="2" colsep="0" rowsep="0"/>
	  <tbody>
	    <row>
	      <entry valign="top"><mediaobject><imageobject><imagedata fileref="images/img_file_window_toolbar_9.png"/></imageobject></mediaobject></entry>
	      <entry valign="top">
		<para>
		  These commands
		  are only available in File Merge Windows.  They enable you
		to quickly jumpt to the next/previous conflict in the files.
		</para>
	      </entry>
	    </row>
	  </tbody>
	</tgroup>
      </informaltable>

      <para xml:id="sec__file__movingaround_glancebarwarping">
	<emphasis role="bold">Using the Glance Bar</emphasis>
      </para>

      <informaltable frame="none">
	<tgroup cols="2">
	  <colspec colnum="1" colwidth="1in" colsep="0" rowsep="0"/>
	  <colspec colnum="2" colsep="0" rowsep="0"/>
	  <tbody>
	    <row>
	      <entry valign="top"><mediaobject><imageobject><imagedata fileref="images/img_file_window_glance_1.png"/></imageobject></mediaobject></entry>
	      <entry valign="top"><para>The <link linkend="sec__file__filewindowparts_glancebar">Glance Bar</link> can be
	      used to find changes and scroll the
	      file panels to a specific line or change.</para>
	      <para>Simply move the mouse over the Glance Bar and click.  The corresponding line
	      numbers are displayed in the status bar as you move the mouse.</para>
	      </entry>
	    </row>
	  </tbody>
	</tgroup>
      </informaltable>

    </section>

  </chapter>

  <!-- ================================================================ -->

  <chapter xml:id="chapter_folderdiffwindow">
    <title>The Folder Diff Window</title>
    <para>The<emphasis role="bold"> Folder Diff Window</emphasis> enables you to compare two folders
      and quickly see all of the differences between them. It shows you which files and
      folders are present in both or only present in one. It also shows you which files are different
      and optionally which are equivalent or identical.</para>
    <mediaobject>
      <imageobject>
	<imagedata fileref="images/img_folder_window_1.png"/>
      </imageobject>
    </mediaobject>
    <para/>
    <para>You can use this, for example, to compare two versions of a software project and quickly
      see an overview of the changes between them. You can then click on an individual pair files
      to open a File Diff Window and see how the files have changed.</para>
    <para>The Folder Diff Window is a recursive listing;
      it examines all files contained within the given root folders and all sub-folders
      regardless of how deeply the folders are nested. Producing a listing in a large folder tree
      can take a significant amount of time.</para>
    <para>There are various Show/Hide commands to let you limit the clutter in the window
      and concentrate on the important items more easily.</para>
    <para>Filtering options are available in the 
      <link linkend="sec__opt__folderfilters">Options Dialog</link> to filter out generated and other
      uninteresting files and sub-folders.</para>

    <section xml:id="sec__folder__opening">
      <title>Opening Folder Diff Windows</title>
      <para>You can open Folder Window by selecting
	<emphasis role="bold">File | Open Folder Diff</emphasis> from the menu.
	This raises the <emphasis role="bold">Select Folders to Compare Dialog</emphasis> 
	and allows you to type or browse to the pathnames of the folders you
        wish to compare:</para>
      <mediaobject>
	<imageobject>
	  <imagedata fileref="images/img_select_folders_to_compare.png"/>
	</imageobject>
      </mediaobject>
      <para/>
      <para>If a <emphasis role="bold">Swap</emphasis> button is provided, it will swap the left and right pathnames.</para>
      <para>Note: if the set of folders selected are already open in an existing window, that window is
        raised rather than creating a new, duplicate window.</para>
    </section>

    <section xml:id="sec__folder__windowparts">
      <title>Parts of a Folder Diff Window</title>
      <para>Here is an example of a Folder Diff Window.</para>
      <mediaobject>
        <imageobject>
          <imagedata fileref="images/img_folder_window_1.png"/>
        </imageobject>
      </mediaobject>
      <para/>
      
      <section xml:id="sec__folder__listing">
	<title>Folder Listing</title>
	<para>In the center of the window is a 2 column listing of the files and sub-folders
	  that are present in the 2 folders being compared.
	  This is a recursive listing; all sub-folders are completely expanded.
	  Lines are colored and an icon is attached to each line based upon the status of
          the files or sub-folders on the line.  In the following example, the files
	  <code>C:\examples\ancestor\subfolder1\Preview_LineMode_3.txt</code> and
	  <code>C:\examples\branch_1\subfolder1\Preview_LineMode_3.txt</code> are
	  different and the file <code>version.h</code> only exists in the
	  <code>C:\examples\ancestor\</code> folder.</para>
	<mediaobject>
          <imageobject>
            <imagedata fileref="images/img_folder_window_2.png"/>
          </imageobject>
	</mediaobject>
	<para/>
	<para>
	  The status bar contains a summary of the 2 folders.  This
	  is independent of the various show/hide settings.
	</para>
	<mediaobject>
          <imageobject>
            <imagedata fileref="images/img_folder_window_3.png"/>
          </imageobject>
	</mediaobject>
	<para>
	  From left to right the fields are the sum of the number of:
          <itemizedlist>
            <listitem>Files: equal equivalent quickmatch different peerless</listitem>
	    <listitem>Folders: pairs peerless</listitem>
	    <listitem>Shortcuts: equal different peerless <emphasis>(Windows only)</emphasis></listitem>
	    <listitem>Symlinks: equal different peerless <emphasis>(Linux/Mac only)</emphasis></listitem>
	  </itemizedlist>
	</para>

	<para><emphasis role="bold">Using The Mouse</emphasis></para>
	
	<para>
	  On rows with a pair of files or folders, double-clicking will open
	  a new DiffMerge file or folder window on the pair.
	</para>
	<para>
	  On rows with a single or pair of shortcuts, double-clicking will
	  open a dialog showing information about the shortcut(s).
	  <emphasis>(Windows only)</emphasis>
	</para>
	<para>
	  On rows with a single or pair of symlinks, double-clicking will
	  open a dialog showing information about the symlink(s).
	  <emphasis>(Linux/Mac only)</emphasis>
	</para>

	<para>Right-clicking on a row will raise a context menu with additional commands.</para>

	<!-- TODO if we decide to do item:13975 show an example context menu and explain
	     the various commands.  This should probably go after the "Other Menu Commands"
	     at the end of this section.
	-->
      </section>

      <section xml:id="sec__folder__toolbar">
	<title>The Toolbar</title>
	<para>The toolbar above the Folder Diff Window presents the following icons.</para>
	<mediaobject>
          <imageobject>
            <imagedata fileref="images/img_folder_window_toolbar_0.png"/>
          </imageobject>
	</mediaobject>
	<para/>
	<para>From left to right, these are:</para>
	<informaltable frame="none">
	  <tgroup cols="2">
	    <colspec colnum="1" colwidth="1in" colsep="0" rowsep="0"/>
	    <colspec colnum="2" colsep="0" rowsep="0"/>
	    <tbody>
	      <row>
		<entry valign="top">
		  <mediaobject>
		    <imageobject>
		      <imagedata fileref="images/img_folder_window_toolbar_1.png"/>
		    </imageobject>
		  </mediaobject>
		</entry>
		<entry valign="top">
		  <para>
		    <emphasis role="bold">View | Compare Selected Files</emphasis> and
		    <emphasis role="bold">View | Compare Selected Folders</emphasis>
		    open the selected pair of items in a File Diff or Folder Diff Window.
		  </para>
		</entry>
	      </row>

	      <row><entry><para/></entry></row>

	      <row>
		<entry valign="top"><mediaobject><imageobject><imagedata fileref="images/img_folder_window_toolbar_2.png"/></imageobject></mediaobject></entry>
		<entry valign="top">
		  <para>
		    <emphasis role="bold">View | Show Equal</emphasis>
		    shows/hides (byte-for-byte) identical files and shortcuts.
		  </para>
		</entry>
	      </row>

	      <row><entry><para/></entry></row>

	      <row>
		<entry valign="top">
		  <mediaobject>
		    <imageobject>
		      <imagedata fileref="images/img_folder_window_toolbar_3.png"/>
		    </imageobject>
		  </mediaobject>
		</entry>
		<entry valign="top">
		  <para>
		    <emphasis role="bold">View | Show Equivalent Files</emphasis>
		    shows/hides files that have minor differences (such as in whitespace),
		    but are otherwise effectively “equivalent”.
		    Equivalence settings are set in the 
		    <link linkend="sec__opt__equivalencemode">Options Dialog</link>.
		  </para>
		</entry>
	      </row>

	      <row><entry><para/></entry></row>

	      <row>
		<entry valign="top">
		  <mediaobject>
		    <imageobject>
		      <imagedata fileref="images/img_folder_window_toolbar_qm.png"/>
		    </imageobject>
		  </mediaobject>
		</entry>
		<entry valign="top">
		  <para>
		    <emphasis role="bold">View | Show Quick-Match Files</emphasis>
		    shows/hides items that were marked equivalent using 
		    <link linkend="sec__opt__equivalencemode">Quick Match Mode</link>.
		    This mode only looks at file size.
		  </para>
		</entry>
	      </row>

	      <row><entry><para/></entry></row>

	      <row>
		<entry valign="top">
		  <mediaobject>
		    <imageobject>
		      <imagedata fileref="images/img_folder_window_toolbar_4.png"/>
		    </imageobject>
		  </mediaobject>
		</entry>
		<entry valign="top">
		  <para>
		    <emphasis role="bold">View | Show Peerless</emphasis>
		    shows/hides items (files, folders, and shortcuts) that
		    are only present in one of the 2 folders.
		  </para>
		</entry>
	      </row>

	      <row><entry><para/></entry></row>

	      <row>
		<entry valign="top">
		<mediaobject>
		  <imageobject>
		    <imagedata fileref="images/img_folder_window_toolbar_5.png"/>
		  </imageobject>
		</mediaobject>
		</entry>
		<entry valign="top">
		  <para>
		    <emphasis role="bold">View | Show Folders</emphasis>
		    shows/hides sub-folders present in both folders.
		  </para>
		</entry>
	      </row>

	    </tbody>
	  </tgroup>
	</informaltable>
      </section>

      <section xml:id="sec__folder__othermenu">
	<title>Other Menu Commands</title>
	<para>There are a few Folder Diff Window commands that are only in the Menu and not on the Toolbar.</para>
	<informaltable frame="none">
	  <tgroup cols="2">
	    <colspec colnum="1" colwidth="3.0in" colsep="0" rowsep="0"/>
	    <colspec colnum="2" colsep="0" rowsep="0"/>
	    <tbody>
	      <row>
		<entry valign="top"><para><emphasis role="bold">File | Reload</emphasis></para></entry>
		<entry valign="top"><para>Force a rescan the folders.  This is useful if you have automatic reloading turned off
		  in the <link linkend="sec__opt__folderwindows">Options Dialog</link>.</para></entry>
	      </row>

	      <row><entry><para/></entry></row>

	      <row>
		<entry valign="top"><para><emphasis role="bold">View | Shortcut Details...</emphasis></para></entry>
		<entry valign="top">
		  <para>
		    On Windows, this command raises the
		    <emphasis role="bold">Shortcut Details</emphasis>
		    dialog on the selected row.
		    For each shortcut this dialog shows the target pathname, 
		    associated icon, description, working directory, and any
		    command line arguments.
		    For shortcut pairs that have file or folder targets,
		    this dialog contains a button to open a file or folder
		    window to compare them.
		  </para>
		</entry>
	      </row>

	      <row><entry><para/></entry></row>

	      <row>
		<entry valign="top"><para><emphasis role="bold">View | Symlink Details...</emphasis></para></entry>
		<entry valign="top">
		  <para>
		    On Linux and Mac, this command raises the
		    <emphasis role="bold">Symlink Details</emphasis>
		    dialog on the selected row.
		    For each symlink this dialog shows the target pathname.
		  </para>
		</entry>
	      </row>

	      <row><entry><para/></entry></row>

	      <row>
		<entry valign="top"><para><emphasis role="bold">View | Show Errors</emphasis></para></entry>
		<entry valign="top"><para>Show/Hide items that had a filesystem error of some type.</para>
		  <para>Double-click on an error row to see the error message.</para></entry>
	      </row>
	    </tbody>
	  </tgroup>
	</informaltable>
      </section>

      <section xml:id="sec__folder__contextmenu">
	<title>Context Menus</title>
	<para>
	  There are a few right-mouse context menu items worth mentioning here:
	</para>

	<informaltable frame="none">
	  <tgroup cols="2">
	    <colspec colnum="1" colwidth="3.0in" colsep="0" rowsep="0"/>
	    <colspec colnum="2" colsep="0" rowsep="0"/>
	    <tbody>
	      <row>
		<entry valign="top">
		  <para>
		    <emphasis role="bold">Open Pair in New DiffMerge Window</emphasis>
		  </para>
		</entry>
		<entry valign="top">
		  <para>
		    Opens the pair of files or folders in a new window.
		  </para>
		</entry>
	      </row>

	      <row>
		<entry valign="top">
		  <para>
		    <emphasis role="bold">Copy Left Pathname to Clipboard</emphasis>
		  </para>
		</entry>
		<entry valign="top">
		  <para>
		    Copies the full pathname of the item in the left tree to the clipboard.
		  </para>
		</entry>
	      </row>

	      <row>
		<entry valign="top">
		  <para>
		    <emphasis role="bold">Copy Right Pathname to Clipboard</emphasis>
		  </para>
		</entry>
		<entry valign="top">
		  <para>
		    Copies the full pathname of the item in the right tree to the clipboard.
		  </para>
		</entry>
	      </row>

	      <row>
		<entry valign="top">
		  <para>
		    <emphasis role="bold">Copy Left to Right</emphasis>
		  </para>
		</entry>
		<entry valign="top">
		  <para>
		    Copies the file, symlink, shortcut or folder in the left tree to the right tree.
		    If the right side does not exist, it will be created.
		    <emphasis role="bold">
		      If the right side does exist, it will be overwritten.
		    </emphasis>
		  </para>
		  <para>
		    The new item will be placed in the same relative location
		    in the right tree as it has in the left tree.  If the parent
		    directory on the right does not exist, it will be created first.
		  </para>
		  <para>
		    <emphasis role="bold">
		      Caution: This will create or overwrite the item in the right tree.
		      If this window was opened by a version control tool, you may still
		      need to tell it about the new files/folders.  If the version control
		      tool asked DiffMerge to show an historical view, the right side may
		      refer to a temporary location (that may be deleted by the version
		      control tool after DiffMerge exits).
		    </emphasis>
		  </para>
		  <para>
		    If the item is a folder, only the folder itself will be
		    created in the right tree.  To copy the folder and its contents
		    use the <emphasis role="bold">Copy Left to Right Recursively</emphasis>
		    command.
		  </para>
		</entry>
	      </row>

	      <row>
		<entry valign="top">
		  <para>
		    <emphasis role="bold">Copy Right to Left</emphasis>
		  </para>
		</entry>
		<entry valign="top">
		  <para>
		    As above but reversed.
		  </para>
		  <para>
		    <emphasis role="bold">
		      Caution: This will create or overwrite the item in the left tree.
		      If this window was opened by a version control tool, you may still
		      need to tell it about the new files/folders.  Also, version control
		      tools tend to populate the left side with an historical view of the
		      tree and that should be treated as read-only.  Use caution when making
		      changes to the left side.
		    </emphasis>
		  </para>
		</entry>
	      </row>

	      <row>
		<entry valign="top">
		  <emphasis role="bold">Shortcut Details...</emphasis>
		</entry>
		<entry valign="top">
		  <para>
		    On Windows, this command will raise the Shortcut Details dialog for
		    the single or pair of shortcuts.
		  </para>
		</entry>
	      </row>

	      <row>
		<entry valign="top">
		  <emphasis role="bold">Symlink Details...</emphasis>
		</entry>
		<entry valign="top">
		  <para>
		    On Linux and Mac, this command will raise the Symlink Details dialog for
		    the single or pair of symlinks.
		  </para>
		</entry>
	      </row>

	    </tbody>
	  </tgroup>
	</informaltable>

      </section>
    </section>
    <section xml:id="sec__folder__export">
      <title>Export Commands</title>


      <para><emphasis role="bold">Export | File Diffs</emphasis></para>
      <para>
	The menu commands under here
	are available when a file pair with differences
	is highlighted in the Folder Window.
	These commands will export the differences in the
	highlighted file pair but without opening a File Diff Window
	on them.
      </para>
      <para>
	See the section on 
	<link linkend="sec__file__export">Exporting File Differences</link>
	for more information on the commands under this menu.
      </para>


      <para><emphasis role="bold">Export | Folder Summary</emphasis></para>
      <para>
	The menu commands under here
	menu will export the contents of the current
	Folder Window to a file.
      </para>
      <para>
	There are several output options, such as "Text" vs "HTML" vs "CSV",
	but in all cases:
      </para>
      <itemizedlist>
	<listitem>
	  The output will contain the same information as is currently on screen.
	</listitem>
	<listitem>
	  The current state of the various Show/Hide commands on the View
	  menu and/or the toolbar will be respected.
	</listitem>
      </itemizedlist>

      <para>
	For example, the HTML view looks like this:
      </para>
      <mediaobject>
	<imageobject>
	  <imagedata fileref="images/img_export_folder_summary_html.png"/>
	</imageobject>
      </mediaobject>

    </section>
  </chapter>

  <!-- ================================================================ -->

  <chapter xml:id="chapter_optionsdialog">
    <title>The Options Dialog</title>
    <para>The <emphasis role="bold">Options Dialog</emphasis> allows you to fine-tune
      DiffMerge to better suit your needs.</para>
    <para>All of the various settings are grouped by category into a series
      of <emphasis role="bold">Pages</emphasis> whose titles are listed on the left side of the dialog.
      You can click on these titles to visit each of the various Pages.</para>
    <para>Each Page is somewhat self-contained and has a <emphasis role="bold">Restore Defaults</emphasis>
      at the bottom.  This button will restore all of the fields on that Page to their
      original factory defaults.</para>

    <para>The Options Dialog can be accessed using <emphasis role="bold">Tools | Options...</emphasis>
      on Windows and Linux and <emphasis role="bold">DiffMerge | Preferences...</emphasis> on OS X.</para>

    <section xml:id="sec__opt__filewindows">
      <title>The File Windows Page</title>
      <para>The <emphasis role="bold">File Windows Page</emphasis>
	contains basic settings for File Diff and Merge Windows.
	It lets you to select the font used in File Panels on screen and when printed.
	It also contains a series of miscellaneous settings explained below.</para>
      <mediaobject>
        <imageobject>
          <imagedata fileref="images/img_dlg_options_filewindows.png"/>
        </imageobject>
      </mediaobject>
      <para/>
      <para>The <emphasis role="bold">Restore Defaults</emphasis> button restores all the fields on
        this (and only this) page to their original factory settings.</para>

      <section xml:id="sec__opt__filewindows_fonts">
	<title>Fonts</title>
	<para>The <emphasis role="bold">Window Font</emphasis> and <emphasis role="bold">Printer Font</emphasis>
	  fields determine the screen and printer fonts used to draw and print the files.
	  The <emphasis role="bold">Choose...</emphasis> buttons raise the standard system font chooser.</para>
	<mediaobject>
          <imageobject>
            <imagedata fileref="images/img_dlg_options_filewindows_1.png"/>
          </imageobject>
	</mediaobject>
      </section>

      <section xml:id="sec__opt__filewindowpage_windowoptions">
	<title>Window Options</title>
	<para>The <emphasis role="bold">Window Options</emphasis> box contains a collection of miscellaneous settings:</para>

	<para> </para>
	<mediaobject>
	  <imageobject>
	    <imagedata fileref="images/img_dlg_options_filewindows_2.png"/>
	  </imageobject>
	</mediaobject>
        <para>DiffMerge can optionally test and display a warning if a file
	  has been modified by another application.  This warning also asks
	  you if you would like to reload the file(s).  This test is performed
	  each time that a File Diff or Merge Window comes to the foreground
	  and becomes the active window.</para>
	<mediaobject>
	  <imageobject>
	    <imagedata align="center" fileref="images/img_dlg_fileschangedondisk.png"/>
	  </imageobject>
	</mediaobject>
	<para/>

	<para> </para>
	<mediaobject>
	  <imageobject>
	    <imagedata fileref="images/img_dlg_options_filewindows_3.png"/>
	  </imageobject>
	</mediaobject>
	<para>When printing File Diff and Merge Windows, DiffMerge actually prints 2 (or 3) files
	  simultaneously. When this option is checked, DiffMerge prints all the page 1s
	  first, then all the page 2s, and so on. When this option is off, DiffMerge prints
	  all of the pages from the left file, then all of the pages from the center file,
	  and then all of the pages from the right file.</para>

	<para> </para>
	<mediaobject>
	  <imageobject>
	    <imagedata fileref="images/img_dlg_options_filewindows_4.png"/>
	  </imageobject>
	</mediaobject>
        <para>When this option is enabled, DiffMerge adds the appropriate end of line
          character(s), if necessary, to the end of the final line of the file before
          saving.</para>

	<para> </para>
	<mediaobject>
	  <imageobject>
	    <imagedata fileref="images/img_dlg_options_filewindows_5.png"/>
	  </imageobject>
	</mediaobject>
	<para>When <emphasis role="bold">Auto-Save</emphasis> is enabled,
	  DiffMerge periodically saves the edited file in a
          special <emphasis role="bold">Temporary Auto-Save File</emphasis>.
	  In the event of a program or system crash, you can recover your work from this temporary file.
	  Auto-Save does not modify the original file.</para>
	<para>The <emphasis role="bold">Edit Interval</emphasis>
          determines the frequency of the auto-saves.  This is an edit count.  For
          example, if the Edit Interval is set to 100, then the Auto-Save File is rewritten
          after every 100 changes.</para>

	<para> </para>
	<mediaobject>
	  <imageobject>
	    <imagedata fileref="images/img_dlg_options_filewindows_6.png"/>
	  </imageobject>
	</mediaobject>
        <para>When this option is enabled, DiffMerge automatically advances to
	  and <link linkend="sec__file__showingchanges_highlightingchanges">highlights</link> the next Change
	  after you apply a patch/change using one of the various toolbar or menu
	  commands.</para>
	<para>This allows you to rapidly apply a series of changes without
          having to manually advance using the Next Change command.</para>
        <para>If not checked, DiffMerge leaves the caret where it was after the
	  patch/change was applied and does not highlight a change.</para>
      </section>
    </section>

    <section xml:id="sec__opt__rulesets">
      <title>The Rulesets Page</title>
      <para>The <emphasis role="bold">Rulesets Page</emphasis> contains all of the settings for
	controlling how Rulesets are used by DiffMerge.
	For information about the contents of an individual Ruleset, see
	<link linkend="chapter_rulesets">Rulesets</link>.</para>
      <para><emphasis role="bold">Rulesets</emphasis> allow you to fine-tune DiffMerge to 
	handle different types of files.  This includes things such as character encodings,
	end of line conventions, and whitespace handling.</para>
      <mediaobject>
	<imageobject>
	  <imagedata fileref="images/img_dlg_options_rulesets.png"/>
	</imageobject>
      </mediaobject>
      <para/>
      <para>The <emphasis role="bold">Restore Defaults</emphasis> button restores all the fields on
        this (and only this) page to their original factory settings.
	<emphasis role="bold">This will also delete all of your Rulesets and restore the original
	  set of Rulesets that were originally shipped with the program.</emphasis></para>

      <section xml:id="sec__opt__rulesets__default">
	<title>Default Ruleset</title>
	<para>The <emphasis role="bold">Default Ruleset</emphasis> is a built-in Ruleset
	  that is applied to a File Diff or Merge Window when no Custom Ruleset is appropriate
	  or when Custom Rulesets are disabled.</para>
	<mediaobject>
	  <imageobject>
	    <imagedata fileref="images/img_dlg_options_rulesets_1.png"/>
	  </imageobject>
	</mediaobject>
	<para/>
	<para>The Default Ruleset cannot be deleted, but you can
	  <link linkend="sec__rule__dialog">edit</link> it.</para>
      </section>

      <section xml:id="sec__opt__rulesets__custom">
	<title>Custom Rulesets</title>
	<para>The <emphasis role="bold">Custom Rulesets</emphasis> box contains a collection of overall settings:</para>

	<para> </para>
	<mediaobject>
	  <imageobject>
	    <imagedata fileref="images/img_dlg_options_rulesets_2.png"/>
	  </imageobject>
	</mediaobject>
	<para>This option turns on Custom Rulesets.  
	  When disabled, the Default Ruleset is used for all File Windows.</para>

	<para> </para>
	<mediaobject>
	  <imageobject>
	    <imagedata fileref="images/img_dlg_options_rulesets_3.png"/>
	  </imageobject>
	</mediaobject>
	<para>This option lets DiffMerge try to automatically select the proper Custom Ruleset
	  using the suffixes of the files and the list of suffixes in each Custom Ruleset.
	  For example, if you open <code>foo.cpp</code> and <code>bar.cpp</code>
	  in a File Diff Window, DiffMerge will automatically select the 
	  <emphasis role="bold">C/C++/C# Source</emphasis> Custom Ruleset. 
	  If you open <code>foo.py</code> and <code>bar.py</code>, DiffMerge will automatically
	  select the <emphasis role="bold">Python Source</emphasis> Custom Ruleset.</para>
	<para>If this option is disabled, DiffMerge will ask you to select a Ruleset when each
	  File Window is opened.</para>

	<para> </para>
	<mediaobject>
	  <imageobject>
	    <imagedata fileref="images/img_dlg_options_rulesets_4.png"/>
	  </imageobject>
	</mediaobject>
        <para>Ignores the case of the file suffixes when matching.</para>
	<para>You probably want this turned on.</para>

	<para> </para>
	<mediaobject>
	  <imageobject>
	    <imagedata fileref="images/img_dlg_options_rulesets_5.png"/>
	  </imageobject>
	</mediaobject>
	<para>When the files in the set have different suffixes, it’s possible to take the
          first match, or to require all of the files to match the same Ruleset.</para>
        <para>You probably don't want this turned on. Temp files often get a system-defined
          temp name rather than the proper suffix. Enabling one file to match enables you to
          ignore the temp file suffix when it’s being compared against a properly named file
          in your workspace.</para>

	<para> </para>
	<mediaobject>
	  <imageobject>
	    <imagedata fileref="images/img_dlg_options_rulesets_6.png"/>
	  </imageobject>
	</mediaobject>
	<para>When DiffMerge cannot find a suffix match, it can either use the Default Ruleset
	  or it can ask you to select one using the
	  <link linkend="dlg_chooseruleset">Choose Ruleset Dialog</link>.</para>

	<para> </para>
	<mediaobject>
	  <imageobject>
	    <imagedata fileref="images/img_dlg_options_rulesets_7.png"/>
	  </imageobject>
	</mediaobject>
	<para>The list box contains all of the currently defined Custom Rulesets. DiffMerge
          ships with Rulesets predefined for C/C++/C# Source, VB Source, and several others.
          This list is ordered – DiffMerge searches for a match in the order listed here.</para>
	<para>The <emphasis role="bold">Add</emphasis> /
	  <emphasis role="bold">Delete</emphasis> /
	  <emphasis role="bold">Clone</emphasis>
	  buttons let you create/destroy Rulesets.</para>
	<para>The <emphasis role="bold">MoveUp</emphasis> /
	  <emphasis role="bold">MoveDown</emphasis>
	  buttons let you re-order them.</para>
	<para>You can double-click an item or click the 
	  <emphasis role="bold">Edit...</emphasis> button
	  to edit or view the Ruleset.  See the chapter on
	  <link linkend="chapter_rulesets">Rulesets</link>
	  for more information.</para>
      </section>
    </section>

    <section xml:id="sec__opt__detaillevel">
      <title>The Detail Level Page</title>
      <para>The <emphasis role="bold">Detail Level Page</emphasis> contains all of the
	parameters for the controlling the Analysis Detail Level.  This is a global
	setting and affects all File Diff and Merge Windows.</para>
      <mediaobject>
        <imageobject>
          <imagedata fileref="images/img_dlg_options_detaillevel.png"/>
        </imageobject>
      </mediaobject>
      <para/>
      <para>The <emphasis role="bold">Restore Defaults</emphasis> button restores all the fields on
        this (and only this) page to their original factory settings.</para>

      <section xml:id="sec__opt__detaillevel__analysis">
        <title>Analysis Detail Level</title>
        <para>The <emphasis role="bold">Analysis Detail Level</emphasis> determines how
	  the files are compared:</para>
	<mediaobject>
          <imageobject>
            <imagedata fileref="images/img_dlg_options_detaillevel_1.png"/>
          </imageobject>
	</mediaobject>
	<para/>

        <itemizedlist>
          <listitem>
            <para>In <link linkend="sec__file__showingchanges_detaillevel_lines">Lines Only</link> 
	      mode, DiffMerge compares the files line-by-line and
	      does not perform any intra-line highlighting/analysis.</para>
	    <tip>
	      <para>This is the fastest mode.  Switch to it if you're working with large
		files and/or having performance problems.</para>
	    </tip>
          </listitem>
          <listitem>
	    <para>In <link linkend="sec__file__showingchanges_detaillevel_lineschars">Lines and Characters</link>
	      mode, DiffMerge performs the line-by-line analysis and then
	      performs intra-line analysis within each of the changes.
              Intra-line analysis is performed over the body of each change and
	      is governed by the following setting.</para>
          </listitem>
        </itemizedlist>
      </section>

      <section xml:id="sec__opt__detaillevel__multiline">
        <title>Multi-Line Intra-Line Analysis Detail Level</title>
        <para>The <emphasis role="bold">Multi-Line Intra-Line Analysis Detail Level</emphasis>
	  determines how hard DiffMerge works to match up characters within a
          multiple line change when in Lines and Characters mode.</para>
	<mediaobject>
          <imageobject>
            <imagedata fileref="images/img_dlg_options_detaillevel_2.png"/>
          </imageobject>
	</mediaobject>
	<para/>
        <itemizedlist>
          <listitem>
            <para>In <emphasis role="bold">Complete</emphasis> mode, the entire body of the change
              (spanning all of the lines in the change) are essentially joined into a single line
              before doing the character-level analysis.  This allows changes introduced by
              re-wrapping text to be separated from actual changes to the text.</para>
            <tip>
              <para>This mode can be <emphasis role="bold">very</emphasis> expensive
		if the files have lots of changes and/or have very low correlation.
		Disable it or switch to Simple mode if you experience performance problems.</para>
	    </tip>
          </listitem>
          <listitem>
            <para>In <emphasis role="bold">Simple</emphasis> mode, lines are joined like
              in Complete mode, but this is limited to short change blocks to avoid using
	      an excessive amount of time and memory on highly uncorrelated blocks.</para>
          </listitem>
          <listitem>
            <para>If <emphasis role="bold">Disabled</emphasis>, DiffMerge does not attempt to join
              lines before doing the character level analysis.</para>
          </listitem>
        </itemizedlist>
        <para>For example, the following images show where a line of source code was broken across
          several lines in one version.
	  When in Simple or Complete mode, only the whitespace is highlighted because
          DiffMerge matches up the words by crossing the line boundaries.</para>
        <mediaobject>
          <imageobject>
            <imagedata fileref="images/img_multiline_simple.png"/>
          </imageobject>
        </mediaobject>
        <para/>
        <para>When Disabled, DiffMerge sees this as a five line change.
	  There is a one line change (where text was deleted from the end of the line)
	  followed by an insert of four lines of new text. 
	  Since DiffMerge does not combine the lines in this mode,
          the two parts are seen simply as adjacent, but unrelated, changes.</para>
        <para/>
        <mediaobject>
          <imageobject>
            <imagedata fileref="images/img_multiline_disabled.png"/>
          </imageobject>
        </mediaobject>
      </section>

      <section xml:id="sec__opt__detaillevel__intraline">
        <title>Intra-line Smoothing Threshold</title>
        <para>The <emphasis role="bold">Intra-line Smoothing Threshold</emphasis>
          causes small spans of equal text between 2 intra-line changes to be marked
	  as part of one combined change.
	  This helps eliminate “noise” within the line.</para>
	<mediaobject>
          <imageobject>
            <imagedata fileref="images/img_dlg_options_detaillevel_3.png"/>
          </imageobject>
	</mediaobject>
	<para/>
	<para>In the following, the threshold was set to 0 (disabled).
	  Notice how the “x” characters are matched up between the changes on the line.</para>
        <mediaobject>
          <imageobject>
            <imagedata fileref="images/img_smoothed_intraline_0.png"/>
          </imageobject>
        </mediaobject>
	<para/>
	<para>In the following, the threshold was set to 3.
	  Notice how the “x”, “xx”, and “xxx” sequences are combined with the
	  surrounding changes.  But the “xxxx” sequence is not affected.</para>
        <mediaobject>
          <imageobject>
            <imagedata fileref="images/img_smoothed_intraline_3.png"/>
          </imageobject>
        </mediaobject>
	<para/>
        <para>The intra-line threshold value doesn't change any difference analysis
	  results; it only affects the coloring of short spans of text within the line.</para>
	<para>The intra-line threshold is only used when the Detail Level is set to
	  Lines and Characters.</para>
      </section>

      <section xml:id="sec__opt__detaillevel__interline">
        <title>Inter-line Smoothing Threshold</title>
        <para>The <emphasis role="bold">Inter-line Smoothing Threshold</emphasis> 
	  causes small groups of equal lines between two changes to be marked as part
          of one combined change.
	  Inter-line smoothing can be thought of as “clumping” nearby changes into a
          single change.</para>
	<mediaobject>
          <imageobject>
            <imagedata fileref="images/img_dlg_options_detaillevel_4.png"/>
          </imageobject>
	</mediaobject>
	<para/>
	<para>In the following, when the smoothing is set to 0 (disabled), we see 2 changes:</para>
        <mediaobject>
          <imageobject>
	    <imagedata fileref="images/img_smoothed_interline_0.png"/>
          </imageobject>
        </mediaobject>
	<para/>
	<para>When the smoothing is set to 3 or more, we see that they have been combined
	  into 1 change that includes the identical lines between them:</para>
        <mediaobject>
          <imageobject>
	    <imagedata fileref="images/img_smoothed_interline_3.png"/>
          </imageobject>
        </mediaobject>
	<para/>
        <para>This feature is initially set to 0 (disabled) because in File Merge Windows
          this smoothing can cause adjacent changes (such as in the above example) to be
	  considered a conflict when the individual (unclumped) changes would not be.
	  When you increase the threshold, you increase the likelihood
          that <link linkend="sec__file__editing_automerge">Auto-Merge</link> 
	  will require manual follow-up.
	  This may or may not be a good thing -- it's somewhat questionable how far apart nearby changes
          should be to be considered independent changes. By increasing the setting to 1 or 2, you
          may produce a few conflicts that will cause Auto-Merge to
          complain, but these are areas that you probably want to examine anyway.</para>
	<para>Also, you might use this feature to reduce the number of annoying little
	  changes reported.  
	  For example, in source code a function frequently consists of several lines of text, a
          blank line, several lines of text, a blank line, and so on. If someone inserts or changes
          a big chunk of code, the blank lines can sync up and the unrelated chunks of code can appear
          as a sequence of little changes.
	  Setting the threshold to 1 should cause these individual changes to appear as
	  1 large change rather than numerous (annoying) little ones.</para>
        <para>This field is used in both Detail Levels.</para>
      </section>
    </section>

    <section xml:id="sec__opt__linecolors">
      <title>The Line Colors Page</title>
      <para>The <emphasis role="bold">Line Colors Page</emphasis> lets you set
	the various colors used to draw text with a File Window.  These colors
	are used when the Detail Level is set to 
	<link linkend="sec__file__showingchanges_detaillevel_lines">Lines Only</link>.
	These colors are also used as the line base colors when the Detail Level
	is set to <link linkend="sec__file__showingchanges_detaillevel_lineschars">Lines and Characters</link>.</para>
      <mediaobject>
        <imageobject>
          <imagedata fileref="images/img_dlg_options_linecolors.png"/>
        </imageobject>
      </mediaobject>
      <para/>
      <para>The <emphasis role="bold">Restore Defaults</emphasis> button restores all the fields on
        this (and only this) page to their original factory settings.</para>

      <!-- 
	   TODO this sub-section broke the CHM for some reason.
	   TODO i don't know what's so special about it.
	   TODO i'm going to omit it for now.  it's not that important.
		
	   <section>
	     <title>Preview Windows</title>
	     <para>The Preview Windows in the center of the page illustrate how your color choices will
	       appear when the Detail Level is set to Lines Only.</para>
	     <para>In File Diff Windows:</para>
	     <mediaobject>
	       <imageobject>
		 <imagedata fileref="images/img_dlg_options_linecolors_2.png"/>
	       </imageobject>
	     </mediaobject>
	     <para/>
	     <para>In File Merge Windows:</para>
	     <mediaobject>
	       <imageobject>
		 <imagedata fileref="images/img_dlg_options_linecolors_1.png"/>
	       </imageobject>
	     </mediaobject>
	   </section>
	   -->

    </section>

    <section xml:id="sec__opt__intralinecolors">
      <title>The Intra-Line Colors Page</title>
      <para>The <emphasis role="bold">Intra-Line Colors Page</emphasis>	lets you set
	the various colors used to draw intra-line changes on top of the line base colors.
	These colors are only used when the Detail Level is set to 
	<link linkend="sec__file__showingchanges_detaillevel_lineschars">Lines and Characters</link>.</para>
      <mediaobject>
        <imageobject>
          <imagedata fileref="images/img_dlg_options_intralinecolors.png"/>
        </imageobject>
      </mediaobject>
      <para/>
      <para>The overall line colors (from the <link linkend="sec__opt__linecolors">Line Colors Page</link>)
	are shown for reference in the first and last columns. The buttons in the Foreground (Unimportant) column
        enable you to change the de-emphasized foreground colors which are used when an intra-line change is
        marked as unimportant, such as text within a comment. The buttons in the Intra-line
        Background column enable you to change the background colors of the intra-line highlight.</para>

      <para>The <emphasis role="bold">Restore Defaults</emphasis> button restores all the fields on
        this (and only this) page to their original factory settings.</para>
    </section>

    <section xml:id="sec__opt__othercolors">
      <title>The Other Colors Page</title>
      <para>The <emphasis role="bold">Other Colors Page</emphasis> lets you to set
	the various colors used to draw miscellaneous items in File Diff
        and Merge Windows.</para>
      <mediaobject>
        <imageobject>
          <imagedata fileref="images/img_dlg_options_othercolors.png"/>
        </imageobject>
      </mediaobject>

      <para>The <emphasis role="bold">Restore Defaults</emphasis> button restores all the fields on
        this (and only this) page to their original factory settings.</para>
    </section>

    <section xml:id="sec__opt__folderwindows">
      <title>The Folder Windows Page</title>
      <para>The <emphasis role="bold">Folder Windows Page</emphasis> contains basic settings
	for Folder Diff Windows.</para>
      <mediaobject>
        <imageobject>
          <imagedata fileref="images/img_dlg_options_folderwindows.png"/>
        </imageobject>
      </mediaobject>
      <para/>
      <para>The <emphasis role="bold">Restore Defaults</emphasis> button restores all the fields on
        this (and only this) page to their original factory settings.</para>

      <section xml:id="sec__opt__folderwindows__fonts">
	<title>Fonts</title>
	<para>The <emphasis role="bold">Window Font</emphasis> and <emphasis role="bold">Printer Font</emphasis>
	  fields determine the screen and printer fonts used to draw and print the Window.
	  The <emphasis role="bold">Choose...</emphasis> buttons raise the standard system font chooser.</para>
	<mediaobject>
          <imageobject>
            <imagedata fileref="images/img_dlg_options_folderwindows_1.png"/>
          </imageobject>
	</mediaobject>
      </section>

      <section xml:id="sec__opt__folderwindows__options">
	<title>Window Options</title>
	<para>The <emphasis role="bold">Window Options</emphasis> box contains miscellaneous settings:</para>

	<para> </para>
	<mediaobject>
	  <imageobject>
	    <imagedata fileref="images/img_dlg_options_folderwindows_2.png"/>
	  </imageobject>
	</mediaobject>
        <para>DiffMerge can optionally automatically rescan the filesystem and
	  look for files that have been modified by other applications.
	  This rescan is performed each time a Folder Diff Window comes to
	  the foreground and becomes the active window.</para>
	<tip>
	  <para>This option can be <emphasis role="bold">very</emphasis>
	    expensive and annoying if you are comparing large folders.
	    Disable it if restacking windows causes an unacceptable delay.
	  </para>
	</tip>
      </section>
    </section>

    <section xml:id="sec__opt__folderfilters">
      <title>The Folder Filters Page</title>
      <para>The <emphasis role="bold">Folder Filters Page</emphasis> contains the
	settings for controlling how DiffMerge filters out uninteresting
	files and sub-folders from the Folder Diff Window display.</para>
      <mediaobject>
        <imageobject>
          <imagedata fileref="images/img_dlg_options_folderfilters_40.png"/>
        </imageobject>
      </mediaobject>
      <para/>
      <para>The <emphasis role="bold">Restore Defaults</emphasis> button restores all the fields on
        this (and only this) page to their original factory settings.</para>

      <tip>
	<para>Scanning the file system is <emphasis role="bold">very</emphasis> expensive
	  and time consuming.  The use of Folder Filters can usually speed this up considerably
	  by eliminating the need to look at various types of files and entire sub-folders.
	  It will also help reduce on-screen clutter.
	</para>
      </tip>

      <section xml:id="sec__opt__folderfilters__filenames">
	<title>Filename Filters</title>
	<para>DiffMerge can filter out temporary, binary, and other machine-generated files
	  that are normally produced as a by-product of software development.
	  This section handles filtering out various files.
	</para>
	<mediaobject>
          <imageobject>
            <imagedata fileref="images/img_dlg_options_folderfilters_40_1.png"/>
          </imageobject>
	</mediaobject>
	<para>
	  The first text field contains a list of suffixes that should
	  be excluded, such as <code>EXE</code> and <code>DLL</code>.
	  When DiffMerge sees a file with one of these suffixes during the file system scan,
	  it skips it completely.
	</para>
	<para>
	  The second text field contains a list of filenames that
	  should be excluded.  Items in this list can contain simple glob-style
	  wildcards, such as "*.dll".
	</para>
	<para>
	  <emphasis>
	    The first field is preserved for historical reasons; the wildcard
	    matching now provided by the second field completely eliminates the
	    need for the first field.
	  </emphasis>
	</para>
	<para>
	  Items in both lists are delimited by whitespace, commas, or semicolons.
	  If you need to add a pattern with one of those characters, surround the
	  entire pattern in double quotes.  To include a double quote within a
	  filename, double it.
	</para>
      </section>

      <section xml:id="sec__opt__folderfilters__folders">
	<title>Sub-folder Filters</title>
	<para>DiffMerge can filter out entire sub-folders (and everything contained within them).
	  This is useful for compiler output directories as well as for the various
	  folders of state files that many Version Control Systems leave in your source tree.
	</para>
	<mediaobject>
          <imageobject>
            <imagedata fileref="images/img_dlg_options_folderfilters_40_2.png"/>
          </imageobject>
	</mediaobject>
	<para>
	  The text field contains a list of sub-folder names that should be excluded.
	  When DiffMerge sees a sub-folder with one of these names during the file system scan,
	  it skips it (and everything contained within the sub-folder).
	</para>
	<para>
	  Items within this list can use wildcards too.  And have the same delimiters
	  and quoting details as described in the previous section.
	</para>
      </section>
      <section xml:id="sec__opt__folderfilters__case">
	<title>Ignore Case</title>
	<mediaobject>
          <imageobject>
            <imagedata fileref="images/img_dlg_options_folderfilters_40_3.png"/>
          </imageobject>
	</mediaobject>
	<para>
	  The <emphasis role="bold">Ignore Case in Patterns</emphasis> controls whether case is ignored or
	  respected when using all of the above set of filter patterns.
	</para>
	<para>
	  The <emphasis role="bold">Ignore Case when Matching Rows</emphasis> controls whether filename
	  case is ignored or respected when the contents of the 2 directories
	  are matched up.  For example, when enabled a file "FOO.TXT" would
	  be assumed to match up with a file "foo.txt" in the other directory.
	  When disabled, they would appear as 2 peerless items.
	  This option also causes the folder window to be
	  sorted with a case-insensitive sort.
	</para>
	<para>
	  These options are primarily intended for Windows and Mac users
	  which have case-insensitive filesystems.
	</para>
      </section>
    </section>

    <section xml:id="sec__opt__foldercolors">
      <title>The Folder Colors Page</title>
      <para>The <emphasis role="bold">Folder Colors Page</emphasis> lets you set the
	various colors used to draw rows within a Folder Diff Window.</para>
      <mediaobject>
        <imageobject>
          <imagedata fileref="images/img_dlg_options_foldercolors.png"/>
        </imageobject>
      </mediaobject>
      <para>The <emphasis role="bold">Restore Defaults</emphasis> button restores all the fields on
        this (and only this) page to their original factory settings.</para>
    </section>

    <section xml:id="sec__opt__equivalencemode">
      <title>The Equivalence Mode Page</title>
      <para>The <emphasis role="bold">Equivalence Mode Page</emphasis> lets you configure
	how Folder Diff Windows compares files.</para>
      <mediaobject>
        <imageobject>
          <imagedata fileref="images/img_dlg_options_equivalencemode.png"/>
        </imageobject>
      </mediaobject>
      <para/>
      <para>
	When a Folder Diff Window scans the file system, it compares
	each pair of files using one of these 2 techniques:
      </para>
      <itemizedlist>
	<listitem>
	  <para>
	    <emphasis role="bold">Quick Match Mode:</emphasis> 
	    When Quick Match is enabled and
	    the file suffix is in the associated list, DiffMerge will just compare
	    the sizes of the 2 files and report "qm" or "different".  This is
	    intended to help speed up scans when there are large media files in
	    the folders.  
	    <emphasis>This method does not require either file to be read,
	    so the results are an approximation.</emphasis>
	  </para>
	</listitem>
	<listitem>
	  <para>
	    <emphasis role="bold">Normal Mode:</emphasis>
	    The contents of both files are read and compared.
	    Pairs that are byte-for-byte identical are marked <emphasis role="bold">equal</emphasis>.
	    Non-equal pairs are marked <emphasis role="bold">different</emphasis>.
	  </para>
	  <para>
	    When a difference is detected, 
	    DiffMerge can optionally rescan non-equal file pairs
	    and ignore things like changes in line termination, 
	    changes in whitespace, and etc.
	    in order to avoid reporting trivial differences.
	    Files which only have
	    ignorable differences as marked <emphasis role="bold">equivalent</emphasis>
	    rather than <emphasis role="bold">different</emphasis>.
	  </para>
	  <para>
	    Please note that this second step is expensive and
	    will cause DiffMerge to take longer to complete the scan.
	    For this reason, there are 2 levels of equivalence testing, 
	    each with different levels of complexity:
	  </para>
	</listitem>
      </itemizedlist>

      <para><emphasis role="bold">Simple File Equivalence</emphasis></para>

      <para>
	Simple equivalence mode attempts to address the most trivial
	reasons for differences that are common to many types of text files:
      </para>
      <itemizedlist>
	<listitem>
	  <para>
	    It will only be applied to files with one of the listed suffixes.
	  </para>
	</listitem>
	<listitem>
	  <para>
	    During the rescan it will ignore differences in line termination
	    characters and/or whitespace.
	  </para>
	</listitem>
	<listitem>
	  <para>
	    It operates as if the Detail Level is set to
	    <link linkend="sec__file__showingchanges_detaillevel_lines">Lines Only</link>
	    mode.
	  </para>
	</listitem>
	<listitem>
	  <para>
	    It assumes that files are in an 8-bit encoding compatible with US-ASCII.
	  </para>
	</listitem>
      </itemizedlist>
      <para>
	Simple equivalence mode <emphasis role="bold">DOES NOT</emphasis>
	look at upper/lower case,
	address character encoding issues, nor import the files into UNICODE.
      </para>

      <para><emphasis role="bold">Ruleset-based File Equivalence</emphasis></para>

      <para>
	Rulesest-based equivalence is a more thorough attempt to determine if
	the files only have trivial changes.
	It uses <emphasis>most</emphasis> of the settings in the corresponding
	Ruleset for each pair of files; this includes:
      </para>
      <itemizedlist>
	<listitem>
	  <para>
	    ignoring differences in character encoding by using the
	    settings on the Character Encodings Page of the Ruleset Dialog
	    and importing the files into UNICODE;
	  </para>
	</listitem>
	<listitem>
	  <para>
	    ignoring differences in line termination, whitespace, 
	    and letter case by using the settings on the Equivalence Mode
	    Page of the Ruleset Dialog; and
	  </para>
	</listitem>
	<listitem>
	  <para>
	    stripping out lines matched by the Lines to Omit settings
	    on the Ruleset.
	  </para>
	</listitem>
      </itemizedlist>
      <para>
	Ruleset-based equivalence <emphasis role="bold">DOES NOT</emphasis>
	use the settings on the	Line Handling Page of the Ruleset Dialog.
      </para>
      <para>
	Ruleset-based equivalence operates as if the Detail Level is set to
	<link linkend="sec__file__showingchanges_detaillevel_lines">Lines Only</link>
	and therefore <emphasis>does not</emphasis> use any of the
	Content Handling “Context” settings.
      </para>
      <para>
	For Ruleset equivalence to work, Rulesets and automatic suffix matching
	must be enabled. For an individual Ruleset, character encoding selection
	must be automatic. If a Ruleset or character encoding cannot be automatically
	chosen, equivalence testing will either be skipped or the Default Ruleset
	chosen instead.
      </para>
      <para>
	NOTE: Do not enable the Default Ruleset if you have binary files in your
	folders since the attempt to import the files into UNICODE will generally
	fail and just waste time.
      </para>
      <para>
	As a performance consideration, you may want to set an upper file size
	limit for Ruleset equivalence testing.  No ruleset-based equivalence
	testing will be done on files that exceed this limit.
      </para>

    </section>



    <section xml:id="sec__opt__messages">
      <title>The Messages Page</title>
      <para>The <emphasis role="bold">Messages Page</emphasis> lets you to choose
	which message dialogs that you do or do not want to see.</para>
      <para>Each of the message dialogs has a “Do not show again!” option.</para>
      <para>The following check boxes let you re-enable any message dialog that you turned off.</para>
      <mediaobject>
        <imageobject>
          <imagedata fileref="images/img_dlg_options_messages.png"/>
        </imageobject>
      </mediaobject>
      <para/>
      <para>The <emphasis role="bold">Restore Defaults</emphasis> button restores all the fields on
        this (and only this) page to their original factory settings.</para>
    </section>

    <section xml:id="sec__opt__explorerintegration">
      <title>The Explorer Integration Page</title>
      <para><emphasis>This Page is only available on Microsoft Windows.</emphasis></para>
      <para>The <emphasis role="bold">Explorer Integration Page</emphasis> lets you control
	the DiffMerge integration with Windows Explorer.
	This feature allows DiffMerge to add commands to the context menu of Windows Explorer.
	These commands allow Windows Explorer to launch DiffMerge with the selected file(s)
	and folder(s).</para>
      <mediaobject>
        <imageobject>
          <imagedata fileref="images/img_dlg_options_explorerintegration_40.png"/>
        </imageobject>
      </mediaobject>
      <para/>

      <section xml:id="sec__opt__explorerintegration__personal">
	<title>Personal Settings</title>
	<para>The integration feature is provided by a DiffMerge-supplied library that is
	  loaded by Windows Explorer.  This library must be registered
	  with the operating system before Windows Explorer will use it.
	  This is a system-wide registration and will affect all users of the computer.
	</para>
	<para>
	  Once the library has been registered with the system, you may personally
	  enable or disable the feature in your user account.
	</para>

	<para>
	  The <emphasis role="bold">Restore Personal Defaults</emphasis> button restores
	  your personal settings to their original factory settings; it does not affect the
	  system-wide registration of the library.
	</para>
      </section>

      <section xml:id="sec__opt__explorerintegration__use">
	<title>Using Explorer Integration</title>
	<para>
	  When Explorer Integration is enabled, DiffMerge will (when appropriate)
	  add a pop-up context menu to the Windows Explorer context menu.
	</para>
	
	<para><emphasis role="bold">When 1 Item is Selected:</emphasis></para>

	<para>
	  When 1 file of folder is selected, the context menu will look something
	  like this:
	</para>
	<mediaobject>
	  <imageobject>
	    <imagedata fileref="images/img_shex_1.png"/>
	  </imageobject>
	</mediaobject>
	<para/>
	<para>
	  DiffMerge shows the long version of the context menu.
	  You can launch DiffMerge with the single item (and interactively
	  fill in the other file or folder), remember the item's pathname in
	  the list, or compare the item with something from the remembered list.
	</para>
	<para>
	  DiffMerge allows you to remember 5 file pathnames and 5 folder pathnames
	  for use in future comparisons.
	</para>
	<para>
	  When you compare with something from the list, DiffMerge will
	  put the <emphasis role="bold">older</emphasis> file/folder in the left panel;
	  you may override this using the <emphasis role="bold">Swap</emphasis>
	  button in the 
	  <link linkend="sec__file__opening">Select Files to Compare</link>
	  or
	  <link linkend="sec__folder__opening">Select Folders to Compare</link>
	  dialogs.
	</para>

	<para><emphasis role="bold">When 2 Items are Selected:</emphasis></para>

	<para>
	  When 2 files or folders are selected, the context menu will look
	  something like this:
	</para>
	<mediaobject>
	  <imageobject>
	    <imagedata fileref="images/img_shex_2.png"/>
	  </imageobject>
	</mediaobject>
	<para/>
	<para>DiffMerge shows the short version of the context menu.
	With it you can launch DiffMerge to compare the 2 items 
	and choose which will appear on the left and right.
	</para>
      </section>
    </section>

    <section xml:id="sec__opt__externaltools">
      <title>The External Tools Page</title>
      <para>The <emphasis role="bold">External Tools Page</emphasis> lets you to direct
	DiffMerge to invoke external, third-party
        tools when comparing and/or merging various types of files.</para>
      <mediaobject>
        <imageobject>
          <imagedata fileref="images/img_dlg_options_externaltools.png"/>
        </imageobject>
      </mediaobject>
      <para/>
      <para>The <emphasis role="bold">Restore Defaults</emphasis> button restores all the fields on
        this (and only this) page to their original factory settings.
	<emphasis role="bold">This will also delete all of your External
	  Tool configurations.</emphasis>
      </para>
      
      <para><emphasis role="bold">Overall Configuration</emphasis></para>

      <para> </para>
      <mediaobject>
	<imageobject>
	  <imagedata fileref="images/img_dlg_options_externaltools_1.png"/>
	</imageobject>
      </mediaobject>
      <para>This option turns of/off the entire External Tools feature.</para>

      <para> </para>
      <mediaobject>
	<imageobject>
	  <imagedata fileref="images/img_dlg_options_externaltools_2.png"/>
	</imageobject>
      </mediaobject>
      <para>Ignores filename case when matching file suffixes.</para>

      <para> </para>
      <mediaobject>
	<imageobject>
	  <imagedata fileref="images/img_dlg_options_externaltools_3.png"/>
	</imageobject>
      </mediaobject>
      <para>
	Indicates if the suffixes for all of the files in the set must
	match or if only one needs to match.
      </para>
      <para>
	You probably don’t want this turned on. 
	Temp files often get a system-defined temp name rather than the proper suffix.
	Turning this off allows you to ignore the temp file suffix when it is being
	compared against a properly named file in your workspace.
      </para>

      <para> </para>
      <mediaobject>
	<imageobject>
	  <imagedata fileref="images/img_dlg_options_externaltools_4.png"/>
	</imageobject>
      </mediaobject>
      <para>
	The list box contains all of the currently configured External Tools.
	By default, no External Tools are configured.
      </para>
      <para>
	The <emphasis role="bold">Add</emphasis> /
	<emphasis role="bold">Delete</emphasis> /
	<emphasis role="bold">Clone</emphasis>
	buttons let you create/delete tool configurations.
      </para>
      <para>
	The <emphasis role="bold">MoveUp</emphasis> /
	<emphasis role="bold">MoveDown</emphasis>
	buttons let you re-order them.
      </para>
      <para>
	You can double-click an item or click the 
	<emphasis role="bold">Edit...</emphasis> button
	to edit or view a configured tool.  See the chapter on
	<link linkend="chapter_externaltools">External Tools</link>
	for more information.
      </para>
    </section>
  </chapter>

  <!-- ================================================================ -->

  <chapter xml:id="chapter_rulesets">
    <title>Rulesets</title>

    <section xml:id="sec__rule__overview">
      <title>Overview</title>
      <para><emphasis role="bold">Rulesets</emphasis> allow you to fine-tune DiffMerge to 
	handle different types of files.  This includes things such as character encodings,
	end of line conventions, and whitespace handling.</para>
      <para>DiffMerge uses the Ruleset settings and the list of Rulesets defined in the
	<link linkend="sec__opt__rulesets">Options Dialog</link>
	to control how a set of files are loaded from disk and compared in a
	File Diff or Merge Window.</para>
      <para>DiffMerge includes a Default Ruleset and a list of Custom Rulesets.
	The Default Ruleset is used when the use of Custom Rulesets is disabled
	or when none of the Custom Rulesets is appropriate.</para>
    </section>

    <section xml:id="sec__rule__dialog">
      <title>The Ruleset Dialog</title>
      <para>The <emphasis role="bold">New/Edit Ruleset Dialog</emphasis> lets you 
	create or modify the settings within a Ruleset. You can edit both the 
	Default Ruleset and individual Custom Rulesets.</para>
      <para>All of the various Ruleset settings are grouped by category into a
	series of <emphasis role="bold">Pages</emphasis> whose titles are listed
	on the left side of the dialog.  You can click on these titles to visit
	each of the various Pages.</para>

      <section xml:id="sec__rule__dialog__namepage">
	<title>The Name Page</title>
        <para>The <emphasis role="bold">Name Page</emphasis> of the
	  <emphasis role="bold">New/Edit Ruleset Dialog</emphasis>.</para>
	<mediaobject>
          <imageobject>
            <imagedata fileref="images/img_dlg_ruleset_name.png"/>
          </imageobject>
	</mediaobject>
	<para/>

	<para><emphasis>This Page does not appear when you are editing
	    the Default Ruleset; it is only present for Custom Rulesets.</emphasis></para>

	<section xml:id="sec__rule__dialog__namepage__name">
	  <title>Ruleset Name</title>
	  <para>This is a “human-readable” name for the Ruleset.
	    This name is for information only; it is displayed
            in various places to help you identify the Ruleset.</para>
	  <mediaobject>
            <imageobject>
              <imagedata fileref="images/img_dlg_ruleset_name_1.png"/>
            </imageobject>
	  </mediaobject>
	</section>

	<section xml:id="sec__rule__dialog__namepage__suffix">
	  <title>File Suffixes</title>
	  <para>This is a list of suffixes that should be assigned to this Ruleset.
	    Entries should be separated by spaces and should not contain dots.</para>
	  <mediaobject>
            <imageobject>
              <imagedata fileref="images/img_dlg_ruleset_name_2.png"/>
            </imageobject>
	  </mediaobject>
	  <para>If a Ruleset has a matching suffix for a particular file, then
	    that Ruleset <emphasis>might</emphasis> be used when the File Window
	    is created.</para>
	</section>
      </section>

      <section xml:id="sec__rule__dialog__encodings">
        <title>The Character Encodings Page</title>
	<para>The <emphasis role="bold">Character Encodings Page</emphasis> of the
	  <emphasis role="bold">New/Edit Ruleset Dialog</emphasis> lets you specify
	  the character encoding for files handled by this Ruleset.</para>
	<mediaobject>
          <imageobject>
            <imagedata fileref="images/img_dlg_ruleset_charenc.png"/>
          </imageobject>
	</mediaobject>
	<para/>

	<para>DiffMerge uses this information to convert the files from their on-disk
	  encoding into UNICODE before comparing them.  This allows, for example,
	  DiffMerge to compare the effective content of 2 files that were created
	  with different encodings.</para>
        <para>After the files are loaded, DiffMerge displays the character encoding(s)
	  of the files in the <link linkend="sec__file__filewindowparts_encodingindicator">status bar</link>.</para>

        <note>
          <para>If a file is loaded in multiple File Diff or Merge Windows, it will only be
	    read from disk once.
	    Subsequent windows will share the in-memory copy of the file.
	    Therefore, when the file is loaded into the first window, the character encoding
	    settings for the Ruleset in that window will be used to convert the file into UNICODE.
	    When the file is “referenced” by a subsequent window, no conversion is required, so
	    the encoding settings in the (possibly different) Ruleset in the second window
	    will not be used for that file.
	  </para>
	</note>

	<section xml:id="sec__rule__dialog__encodings__auto">
	  <title>Automatic Detection</title>
	  <para>When <emphasis role="bold">BOM Detection</emphasis> this is enabled,
	    DiffMerge looks for a UNICODE Byte-Order-Mark (BOM) when reading the files.
	    If a BOM is present, DiffMerge assumes the indicated encoding.
	    If a BOM is not present, DiffMerge uses the Fallback Options below.</para>
	  <mediaobject>
            <imageobject>
              <imagedata fileref="images/img_dlg_ruleset_charenc_1.png"/>
            </imageobject>
	  </mediaobject>
	</section>

	<section xml:id="sec__rule__dialog__encodings__fallback">
	  <title>Fallback Options</title>
	  <para>The <emphasis role="bold">Fallback Options</emphasis> are used when
	    no BOM is present.</para>

	  <para> </para>
	  <mediaobject>
	    <imageobject>
	      <imagedata fileref="images/img_dlg_ruleset_charenc_2.png"/>
	    </imageobject>
	  </mediaobject>
	  <para>DiffMerge assumes that files are encoding using the local system
	    default character encoding.</para>
	  <para>Use this if all of your files use system default encoding.</para>

	  <para> </para>
	  <mediaobject>
	    <imageobject>
	      <imagedata fileref="images/img_dlg_ruleset_charenc_3.png"/>
	    </imageobject>
	  </mediaobject>
	  <para>DiffMerge will raise the 
	    <emphasis role="bold">Choose Character Encoding Dialog</emphasis>
	    and ask you to select an encoding when the File Diff or Merge Window
	    is created.</para>
	  <mediaobject>
	    <imageobject>
	      <imagedata align="center" fileref="images/img_dlg_choosecharenc.png"/>
	    </imageobject>
	  </mediaobject>
	  <para/>
	  <para>Use this if you have files of this type in multiple encodings
	    on your system, but will only be comparing files that have the same
	    encoding.</para>

	  <para> </para>
	  <mediaobject>
	    <imageobject>
	      <imagedata fileref="images/img_dlg_ruleset_charenc_4.png"/>
	    </imageobject>
	  </mediaobject>
	  <para>DiffMerge will raise the Choose Character Encoding Dialog
	    once and ask you to select an encoding <emphasis role="bold">FOR EACH FILE</emphasis>
	    when the File Diff or Merge Window is created.</para>
	  <para>Use this if you have files of this type in multiple encodings
	    on your system and need to do arbitrary comparisons.
	    This gives you maximum flexibility and lets you select an encoding
	    on a file-by-file basis.</para>

	  <para> </para>
	  <mediaobject>
	    <imageobject>
	      <imagedata fileref="images/img_dlg_ruleset_charenc_5.png"/>
	    </imageobject>
	  </mediaobject>
	  <para>
	    This option allows you to specify a primary and upto 2 alternate
	    character encodings.
	    DiffMerge will first try to use the primary character encoding.
	    If that fails, DiffMerge will attempt to use the alternates.
	  </para>
	</section>

	<section xml:id="sec__rule__dialog__encodings__named">
	  <title>Named Encoding</title>
	  <para>
	    Each of the controls in the <emphasis role="bold">Named Character Encoding</emphasis>
	    section have a list of all character encoding converters on the system.
	  </para>
	  <mediaobject>
            <imageobject>
              <imagedata fileref="images/img_dlg_ruleset_charenc_6.png"/>
            </imageobject>
	  </mediaobject>
        </section>
      </section>

      <section xml:id="sec__rule__dialog__lomit">
	<title>The Lines to Omit Page</title>
	<para><emphasis>Everything on this page is optional.</emphasis></para>
        <para>
	  The <emphasis role="bold">Lines to Omit Page</emphasis> of the
	  <emphasis role="bold">New/Edit Ruleset Dialog</emphasis> lets you describe
	  lines that should be completely omitted from the difference analysis.
	  For example, lines containing RCS revision or date keywords.
	</para>
        <mediaobject>
          <imageobject>
            <imagedata fileref="images/img_dlg_ruleset_lomit.png"/>
          </imageobject>
        </mediaobject>
	<para/>

	<para>
	  The list box presents a list of the patterns already defined.
	  You may create as many of these patterns as you want.  You can think
	  of these as a series of <code>grep -v</code> commands applied to the
	  each file before DiffMerge compares them.
	</para>

	<section xml:id="sec__rule__dialog__lomit__patterndialog">
          <title>The Pattern Dialog</title>
	  <para>The <emphasis role="bold">Add/Edit Pattern Dialog</emphasis>.</para>
          <mediaobject>
            <imageobject>
	      <imagedata fileref="images/img_dlg_lomit.png"/>
            </imageobject>
          </mediaobject>
	  <para/>

	  <section xml:id="sec__rule__dialog__lomit__patterndialog__pattern">
	    <title>Pattern</title>
            <para>Here you can enter a regular expression
	      that will be used to search for lines to omit.</para>
            <mediaobject>
	      <imageobject>
		<imagedata fileref="images/img_dlg_lomit_1.png"/>
	      </imageobject>
            </mediaobject>
	    <para/>
	    <para>For convenience, there are buttons to the right to supply patterns for
	      some commonly omitted items.</para>
	  </section>
	  
	  <section xml:id="sec__rule__dialog__lomit__patterndialog__skip">
	    <title>Lines to Skip</title>
	    <para>This field indicates how many lines should be omitted with each match.
	      You might use this, for example, if you know that there are 2 lines of
	      page headers after each page break.  Most of the time this field will be 1.</para>
            <mediaobject>
	      <imageobject>
		<imagedata fileref="images/img_dlg_lomit_2.png"/>
	      </imageobject>
            </mediaobject>
	  </section>
        </section>
      </section>

      <section xml:id="sec__rule__dialog__line">
        <title>The Line Handling Page</title>
        <para>The <emphasis role="bold">Line Handling Page</emphasis> of the
	  <emphasis role="bold">New/Edit Ruleset Dialog</emphasis>
	  lets you control how DiffMerge treats End of Line (EOL) characters
	  and if trivial differences are ignored when matching up lines in
	  File Diff and Merge Windows.</para>
	<mediaobject>
          <imageobject>
            <imagedata fileref="images/img_dlg_ruleset_linehandling.png"/>
          </imageobject>
	</mediaobject>
	<para/>
	<note>
	  <para>Unless you have specific needs, everything on this Page should
	    always be enabled.</para>
	</note>

	<section xml:id="sec__rule__dialog__line__term">
	  <title>Line Termination</title>
          <para>Different platforms use different line termination characters. Such
            differences can cause two otherwise identical files to look like completely
            different files.</para>
	  <mediaobject>
            <imageobject>
              <imagedata fileref="images/img_dlg_ruleset_linehandling_1.png"/>
            </imageobject>
	  </mediaobject>
	  <para/>
	  <itemizedlist>
	    <listitem><para>When enabled, DiffMerge treats all CR, LF, and CRLF characters as
		a generic end-of-line (EOL) marker and excludes them from the line.
		Line termination differences are not detected or indicated in any way.
		This lets you compare files from different platforms with different EOL
		conventions.</para>
	      <para>When enabled, EOL characters are grayed-out to indicate that
		they are being ignored:</para>
	      <mediaobject>
		<imageobject>
		  <imagedata fileref="images/img_file_window_eol_2.png"/>
		</imageobject>
	      </mediaobject>
	      <para/>
	    </listitem>
	    <listitem><para>When disabled, the original CR, LF, and CRLF characters are
		preserved and used in the analysis.  The EOL characters are treated as
		part of the line.
		So 2 otherwise identical files with
		different EOL characters will appear to be 2 completely different files
		(with 1 change spanning the whole file).</para>
	      <para>When disabled, EOL characters are not grayed-out; they are part of
		the line and drawn just like other characters on the line.</para>
	      <mediaobject>
		<imageobject>
		  <imagedata fileref="images/img_file_window_eol_1.png"/>
		</imageobject>
	      </mediaobject>
	      <para/>
	    </listitem>
	  </itemizedlist>
	</section>

	<section xml:id="sec__rule__dialog__line__match">
	  <title>Line Matching</title>
	  <para>These options let DiffMerge ignore whitespace and letter case when
	    vertically aligning and matching up lines.  Generally, this allows DiffMerge
	    to achieve the best vertical text alignment.</para>
	  <mediaobject>
	    <imageobject>
	      <imagedata fileref="images/img_dlg_ruleset_linehandling_2.png"/>
	    </imageobject>
	  </mediaobject>
	  <para/>
	  <note>
	    <para>Changes in whitespace and letter case on a line will still be detected
	      and indicated, but they will not throw-off the vertical alignment.
	      This is very useful when source files are re-indented.</para>
	  </note>
	</section>
      </section>

      <section xml:id="sec__rule__dialog__content">
        <title>The Content Handling Page</title>
        <para>The <emphasis role="bold">Content Handling Page</emphasis> of the
	  <emphasis role="bold">New/Edit Ruleset Dialog</emphasis>
	  lets you tell DiffMerge about the various contexts, such as string
	  literals and comments, within a file.
	  DiffMerge can use this information to classify changes as important
	  or unimportant.</para>
	<para>
	  <emphasis>These settings are only used in File Diff and Merge Windows
	    when the Detail Level is set to
	    <link linkend="sec__file__showingchanges_detaillevel_lineschars">Lines and Characters</link>.
	  </emphasis>
	</para>
	<mediaobject>
	  <imageobject>
	    <imagedata fileref="images/img_dlg_ruleset_contenthandling.png"/>
	  </imageobject>
	</mediaobject>
	<para/>

        <para>Within source code there are usually three types of content.
	  These are called <emphasis role="bold">Contexts</emphasis>:</para>
	<variablelist>
	  <varlistentry>
	    <term>Literal Context</term>
	    <listitem>
	      <para>Quoted strings and other such text where you want exact matching.
		For example, changing the whitespace or letter case within a string
		prompt may change the behavior of a progrem.</para>
	      <para>We will mark changes in this context as
		<emphasis role="bold">Important</emphasis>.</para>
	    </listitem>
	  </varlistentry>
	  <varlistentry>
	    <term>Comment Context</term>
	    <listitem>
	      <para>Within a source code comment you may want to relax the rules some
		and disregard some of the changes.  For example, suppose you have a large
		block of comment text and you re-wrap it in one version of the file.
		You might like to hide the change and pretend it's not there.</para>
	      <para>We will mark changes in this context as
		<emphasis role="bold">Unimportant</emphasis>.</para>
	    </listitem>
	  </varlistentry>
	  <varlistentry>
	    <term>Default Context (Everything Else)</term>
	    <listitem>
	      <para>Any content that cannot be assigned to one of the above contexts
		is said to be in the Default Context.  For source code, this is generally
		the bulk of the file.</para>
	      <para>Generally, changes in this context should be marked as Important,
		but you may override that.</para>
	    </listitem>
	  </varlistentry>
	</variablelist>

	<section xml:id="sec__rule__dialog__content__match">
	  <title>Matched Contexts</title>
	  <para>Literals and Comments are said to be <emphasis role="bold">Matched Contexts</emphasis>
	    because we need to have a pattern to identify them.</para>
	  <mediaobject>
	    <imageobject>
	      <imagedata fileref="images/img_dlg_ruleset_contenthandling_1.png"/>
	    </imageobject>
	  </mediaobject>
	  <para/>
	  <para>The list box shows all of the defined context patterns.
	    The <emphasis role="bold">Add...</emphasis> and
	    <emphasis role="bold">Edit...</emphasis> buttons will let you
	    create a new pattern or modify an existing one using the
	    <link linkend="sec__rule__dialog__content__context">Context Dialog</link>.
	  </para>
	</section>

	<section xml:id="sec__rule__dialog__content__defaultcontextguidelines">
	  <title>Default Context Guidelines</title>
	  <para>The following fields let you control how DiffMerge will mark
	    changes that are found within this context.  This discussion applies
	    to the Default Context as well as Matched Contexts that are defined
	    using the Context Dialog.</para>

	  <para> </para>
	  <mediaobject>
	    <imageobject>
	      <imagedata fileref="images/img_dlg_ruleset_contenthandling_2.png"/>
	    </imageobject>
	  </mediaobject>
	  <para>This option lets you declare that the overall context is 
	    either important or unimportant.  If it is important, you can
	    refine the context further to make commonly ignored things
	    unimportant.</para>
	  <para>Generally, this should always be checked.</para>

	  <para> </para>
	  <mediaobject>
	    <imageobject>
	      <imagedata fileref="images/img_dlg_ruleset_contenthandling_3.png"/>
	    </imageobject>
	  </mediaobject>
	  <para><emphasis>This option is only enabled if you elected to keep EOL characters
	      in the analysis (not Ignore/Strip EOLs on the Line Handling Page).</emphasis></para>
	  <para>This option will mark changes as Important/Unimportant that are caused by
	    inconsistencies in the EOL characters within a file.</para>

	  <para> </para>
	  <mediaobject>
	    <imageobject>
	      <imagedata fileref="images/img_dlg_ruleset_contenthandling_4.png"/>
	    </imageobject>
	  </mediaobject>
	  <para>This option will mark changes in letter case as Important/Unimportant.</para>
	  <para>Generally, this option should be turned on -- unless you are in a
	    case-insensitive language like VB.</para>

	  <para> </para>
	  <mediaobject>
	    <imageobject>
	      <imagedata fileref="images/img_dlg_ruleset_contenthandling_5.png"/>
	    </imageobject>
	  </mediaobject>
	  <para>This option will mark changes in whitespace as Important/Unimportant.
	    this can mean SPACES-only or SPACES-and-TABS depending on the next field.</para>
          <para>In languages like C/C++ you should turn this option off for the Default
            Context because whitespace is not significant within code.</para>
	  <para>In languages like Python you should turn it on for the Default Context
	    because leading whitespace is significant in Python.</para>

	  <para> </para>
	  <mediaobject>
	    <imageobject>
	      <imagedata fileref="images/img_dlg_ruleset_contenthandling_6.png"/>
	    </imageobject>
	  </mediaobject>
	  <para>This option determines whether TABs are equivalent to SPACES.</para>
	  <para>Generally, this option should be turned on for most languages.</para>
	</section>

        <section xml:id="sec__rule__dialog__content__context">
          <title>The Context Dialog</title>
	  <para>The <emphasis role="bold">Define New/Edit Context Dialog</emphasis> lets
	    you define the boundaries of a Context.
	    A Context is a mechanism for identifying portions of a document that should be
            specially handled such as a string literal or comment.</para>
          <mediaobject>
            <imageobject>
              <imagedata fileref="images/img_dlg_context.png"/>
            </imageobject>
          </mediaobject>
	  <para/>

          <para>A Context is defined as a Start Pattern and an optional End Pattern. 
	    Patterns must be valid Regular Expressions.
	    The End Pattern may be omitted if <emphasis role="bold">Ends at EOL</emphasis> is checked.
	    Set the <emphasis role="bold">Escape Character</emphasis>
            if the context has a special character (such as a backslash) to prevent premature
            matching of the End Pattern or EOL.</para>
	  <para>The text that matches the Start Pattern is not considered part of the 
	    matched context; only the text following it (and including the text matching
	    the End Pattern).</para>

          <para>See the <link linkend="sec__rule__dialog__content__defaultcontextguidelines">Default Context Guidelines</link>
	    for an explanation of the Context Guideline fields on this dialog.</para>
        </section>
      </section>

      <section xml:id="sec__rule__dialog__equivalence">
	<title>Equivalence Mode</title>
	<para>The <emphasis role="bold">Equivalence Mode Page</emphasis> of the 
	  <emphasis role="bold">New/Edit Ruleset Dialog</emphasis>
	  lets you control what differences are ignored in Folder Diff Windows
	  when the Equivalence Mode is set to Ruleset-based.</para>
        <mediaobject>
          <imageobject>
            <imagedata fileref="images/img_dlg_ruleset_equivalencemode.png"/>
          </imageobject>
        </mediaobject>
	<para/>
	<note>
	  <para>The settings on Equivalence Mode Page are very similar to
	    the settings on the Line Handling Page.  The settings here are
	    only used by Folder Windows; the others are only used for File Windows.</para>
	</note>
      </section>

    </section>
  </chapter>

  <!-- ================================================================ -->

  <chapter xml:id="chapter_externaltools">
    <title>External Tools</title>

    <section xml:id="sec__ext__overview">
      <title>Overview</title>
      <para>Whenever DiffMerge is asked to compare or merge a set of files
	and the External Tools feature is enabled, DiffMerge can either 
	open the files in a File Diff or Merge Window or it can hand them
	to an external application and let it process the files.</para>

      <para>You can use this feature, for example, to let other applications
	handle binary files types (such as word processor documents) or XML files
	and then use a DiffMerge Folder Diff Window to compare 2 folders of
	documents (using the built-in 
	<link linkend="sec__opt__equivalencemode">Exact Match Only Equivalence Mode</link>).
	And when you double-click on a pair of files, the external application will
	be launched to actually show you the changes.</para>

      <para>DiffMerge uses the suffixes of the files and searches the
	list of configured External Tools for a match.  The tools are
	searched in the order listed in the 
	<link linkend="sec__opt__externaltools">Options Dialog</link>.
	DiffMerge then tries to use the first matches.
	If no tool matches, DiffMerge creates a normal File Diff or Merge Window.</para>
      </section>

    <section xml:id="sec__ext__launching">
      <title>Launching an External Tool</title>
      <para>When DiffMerge gets a match for files given on the command line,
	DiffMerge will invoke that tool directly and wait
	for it to exit before exiting; DiffMerge will then exit with that tool's exit
	status.  If <link linkend="sec__opt__messages">Messages</link>
	are disabled, DiffMerge will do this without even creating a DiffMerge window.</para>

      <para>When DiffMerge gets a match for an interactive request, DiffMerge
	just launches it as a peer application and does not wait for it to complete.</para>
    </section>

    <section xml:id="sec__ext__dialog">
      <title>The External Tools Dialog</title>
      <para>The <emphasis role="bold">Add/Edit External Tool Dialog</emphasis>
	lets you create or modify the settings for an External Tool.</para>
      <para>For each External Tool that you configure, you can decide if the
	tool is enabled for File Diffs, File Merges, or both.
	You can select different executables and command line argument
	templates for each mode.</para>
      <para>All of the various tool settings are grouped by category into a
	series of <emphasis role="bold">Pages</emphasis> whose titles are
	listed on the left side of the dialog.  You can click on these titles
	to visit each of the various Pages.</para>

      <section xml:id="sec__ext__dialog__name">
	<title>The Name Page</title>
	<para>The <emphasis role="bold">Name Page</emphasis> of the
	  <emphasis role="bold">Add/Edit External Tool Dialog</emphasis>.</para>
	<mediaobject>
          <imageobject>
            <imagedata fileref="images/img_dlg_externaltool_name.png"/>
          </imageobject>
	</mediaobject>
	<para/>

	<para><emphasis role="bold">Name</emphasis></para>
	<para>
	  This is a “human-readable” name for the tool.
	  This name is for information only; it is displayed
	  in various places to help you identify the tool.
	</para>
	<mediaobject>
	  <imageobject>
	    <imagedata fileref="images/img_dlg_externaltool_name_1.png"/>
	  </imageobject>
	</mediaobject>

	<para><emphasis role="bold">File Suffixes</emphasis></para>
	<para>
	  This is a list of suffixes that should be assigned to this External Tool.
	  Entries should be separated by spaces and should not contain dots.
	</para>
	<mediaobject>
	  <imageobject>
	    <imagedata fileref="images/img_dlg_externaltool_name_2.png"/>
	  </imageobject>
	</mediaobject>
      </section>

      <section xml:id="sec__ext__dialog__diff">
	<title>The Diff Page</title>
	<para>The <emphasis role="bold">Diff Page</emphasis> of the
	  <emphasis role="bold">Add/Edit External Tool Dialog</emphasis>
	  lets you configure the tool to be used for File Diffs.</para>
	<mediaobject>
          <imageobject>
            <imagedata fileref="images/img_dlg_externaltool_diff.png"/>
          </imageobject>
	</mediaobject>
	<para/>

	<para><emphasis role="bold">2-Way File Diffing</emphasis></para>
	<para>This check box determines if this tool should be used for File Diffs.</para>
	<mediaobject>
	  <imageobject>
	    <imagedata fileref="images/img_dlg_externaltool_diff_1.png"/>
	  </imageobject>
	</mediaobject>

	<para><emphasis role="bold">Pathname</emphasis></para>
	<para>
	  This field contains the pathname of the executable that
	  should be used for File Diffs.
	</para>
	<mediaobject>
	  <imageobject>
	    <imagedata fileref="images/img_dlg_externaltool_diff_2.png"/>
	  </imageobject>
	</mediaobject>
	<para/>
	<tip>
	  <para>On OS X, you can give the path to either the application bundle
	  (the <code>foo.app</code> folder) or the name of the actual executable
	  inside the application bundle
	  (<code>foo.app/Contents/MacOS/foo</code>).</para>
	</tip>

	<para><emphasis role="bold">Command Line Arguments</emphasis></para>
	<para>
	  Since each external application seems to have its own unique
	  argument ordering and command flags, we define the command line
	  arguments using a template containing place-holder tokens.
	  When DiffMerge is ready to launch the external application, it
	  will substitute pathnames and labels into the template and build
	  the actual command line.
	</para>
	<mediaobject>
	  <imageobject>
	    <imagedata fileref="images/img_dlg_externaltool_diff_3.png"/>
	  </imageobject>
	</mediaobject>
	<para/>
	<para>DiffMerge defines the following substitution tokens for File Diffs:</para>
	<variablelist>
	  <varlistentry>
	    <term><code>%LEFT_LABEL% %RIGHT_LABEL%</code></term>
	    <listitem>
	      <para>The labels for the left and right files.
	      In a DiffMerge File Diff Window, these labels are
	      displayed above the panel; other applications may
	      display them differently or not use them at all.</para>
	      <para>When DiffMerge is handing off the initial set of files received on the
	      command line to an external tool, the values for these tokens come from the
	      <code>/title1</code>
	      and
	      <code>/title2</code>
	      arguments given to DiffMerge.
	      Otherwise, they default to the pathnames of the corresponding files.</para>
	    </listitem>
	  </varlistentry>
	  <varlistentry>
	    <term><code>%LEFT_PATH %RIGHT_PATH%</code></term>
	    <listitem>
	      <para>The pathnames of the corresponding files.</para>
	    </listitem>
	  </varlistentry>
	</variablelist>
	<para>The <emphasis role="bold">Left</emphasis> and
	<emphasis role="bold">Right</emphasis> buttons are for your
	convenience and can be used to insert the corresponding token
	(with quotes) at the
	current insertion point into the text field.</para>
	<tip>
	  <para>It is highly recommended that you enclose each token in quotes so that
	  whitespace in the titles and/or pathnames are properly received by the external
	  application.</para>
	</tip>
      </section>

      <section xml:id="sec__ext__dialog__merge">
	<title>The Merge Page</title>
	<para>The <emphasis role="bold">Merge Page</emphasis> of the
	  <emphasis role="bold">Add/Edit External Tool Dialog</emphasis>
	  lets you configure the tool to be used for File Merges.</para>
	<mediaobject>
          <imageobject>
            <imagedata fileref="images/img_dlg_externaltool_merge.png"/>
          </imageobject>
	</mediaobject>
	<para/>
	<para>The descriptions for most of these fields are identical to
	  the descriptions on the previous page for
	  <link linkend="sec__ext__dialog__diff">File Diffs</link>.</para>
	<para>DiffMerge defines the following substitution tokens for File Merges:</para>
	<variablelist>
	  <varlistentry>
	    <term><code>%WORKING_LABEL% %OTHER_LABEL%</code></term>
	    <listitem>
              <para>The labels for the “working” (left) and “other” (right) files.</para>
	      <para>When DiffMerge is handing off the initial set of files received on the
		command line to an external tool, the values for these tokens come from the
		<code>/title1</code>
		and
		<code>/title3</code>
		arguments given to DiffMerge.
		Otherwise, they default to the pathnames of the corresponding files.</para>
	    </listitem>
	  </varlistentry>
	  <varlistentry>
	    <term><code>%DEST_LABEL%</code></term>
	    <listitem>
              <para>The label for the “destination” (center) file.</para>
	      <para>When DiffMerge is handing off the initial set of files received on the
		command line to an external tool, the value for this token come from the
		<code>/title2</code>
		argument given to DiffMerge.
		Otherwise, it defaults to the pathname of the destination result or
		the common ancestor baseline file.</para>
	    </listitem>
	  </varlistentry>
	  <varlistentry>
	    <term><code>%WORKING_PATH% %OTHER_PATH%</code></term>
	    <listitem>
              <para>The pathnames of the “working” (left) and “other” (right) files.</para>
	    </listitem>
	  </varlistentry>
	  <varlistentry>
	    <term><code>%BASELINE_PATH%</code></term>
	    <listitem>
              <para>The pathname of the “baseline” (center) file.
		This is the common ancestor.</para>
	    </listitem>
	  </varlistentry>
	  <varlistentry>
	    <term><code>%DEST_PATH%</code></term>
	    <listitem>
              <para>The pathname where the merge result should be written.</para>
	      <para>This comes from the
		<code>/result</code>
		argument given to DiffMerge.
		It falls back to the baseline pathname.</para>
	    </listitem>
	  </varlistentry>
	</variablelist>
      </section>
    </section>
  </chapter>

  <!-- ================================================================ -->

  <chapter xml:id="chapter_printing">
    <title>Printing</title>
    
    <section xml:id="sec__print__file">
      <title>Printing File Windows</title>
      <para>
	You can print the contents of File Diff and Merge Windows and
	see the differences highlighted as they are on the screen.
      </para>

      <tip>
	<para>
	  With the addition of HTML Export in 4.2, if you want to
	  print or share file differences, you might want to use the new
	  <link linkend="sec__file__export">HTML Export</link>
	  feature to export the differences to a .html file
	  and let the browser handle the details of print and/or
	  share the .html file with co-workers, rather than using the
	  native print feature described in this section.
	</para>
	<para>
	  I feel that the look of the HTML output is
	  much nicer than the output produced by the original 
	  native DiffMerge print commands.  For example, the HTML
	  output supports line wrapping and 3 different layouts
	  whereas the native printing does not wrap and only
	  handles side-by-side on facing pages.
	</para>
	<para>
	  The native printing output is due for overhaul; until then 
	  you might consider the HTML option.
	</para>
      </tip>

      <mediaobject>
        <imageobject>
          <imagedata fileref="images/img_file_printpreview.png"/>
        </imageobject>
      </mediaobject>
      <para/>
      <para>DiffMerge uses all of the current display settings, such as the
	<link linkend="sec__file__showingchanges_detaillevel">Detail Level</link>,
	<link linkend="sec__file__displaymode">Display Mode</link>, various
	hiding options, and etc.  So for example, if you are have
	selected Show Differences Only in the window, the output will also
	only contain the differences.</para>
      <para>Changes are printed in color using a bold font.
	Conflicts are printed in color using a bold and underlined font.
	DiffMerge uses the same coloring rules for text as on the screen;
	however, it does not use the background colors.</para>
      <para>The page footer gives a summary of the settings that affected the
	output.</para>

      <para>When DiffMerge prints a File Window, it actually prints both/all 
	of the files in the window simultaneously.
	Each File Panel is printed on a separate page, 2 or 3 pages across.
	The page numbers are augmented with the letters
	a, b, and c to help you track the printed pages.
	Vertically, files are synchronized like they are on screen so that content
	lines up on each page.  For example, when printing a File Merge Window,
	you should be able to place pages 10a, 10b, and 10c side-by-side and
	have everything line up just like on the screen.</para>

      <para>For your convenience, DiffMerge can print the files sequentially
	(1a, 2a, ..., 1b, 2b, ...) or interleaved (1a, 1b, 2a, 2b, ...).
	This is controlled in the
	<link linkend="sec__opt__filewindowpage_windowoptions">Options Dialog</link>.</para>

      <para>Currently, DiffMerge does not line-wrap long lines. 
	Lines that do not fit across a single page are truncated.
	If long lines are a problem, try printing in landscape mode and/or using a
	smaller font.</para>
    </section>

    <section xml:id="sec__print__folder">
      <title>Printing Folder Windows</title>
      <para>You can also print the contents of Folder Diff Windows.</para>

      <tip>
	<para>
	  With the addition of HTML Export in 4.2, if you want to
	  print or share the summary of differences in the folder pair,
	  you might want to use the new
	  <link linkend="sec__folder__export">HTML Export</link>
	  feature to export the differences to a .html file
	  and let the browser handle the details of print and/or
	  share the .html file with co-workers, rather than using the
	  native print feature described in this section.
	</para>
	<para>
	  I feel that the look of the HTML output is
	  much nicer than the output produced by the original 
	  native DiffMerge print commands.  For example, the HTML
	  output has a single column layout similar to "unified"
	  diffs which is helpful when there are long pathnames.
	</para>
	<para>
	  The native printing output is due for overhaul; until then 
	  you might consider the HTML option.
	</para>
      </tip>

      <mediaobject>
        <imageobject>
          <imagedata fileref="images/img_folder_printpreview.png"/>
        </imageobject>
      </mediaobject>
      <para/>
      <para>DiffMerge uses all of the current Show/Hide settings and the same
	line icons and text coloring, so the folder listing on paper should
	match the listing on screen.</para>
      <para>The folder summary statistics are printed in the page footer.</para> 
    </section>
  </chapter>

  <!-- ================================================================ -->

  <chapter xml:id="chapter_clargs">
    <title>Command Line Arguments</title>
    <para>DiffMerge allows a variety of different command lines formats.
      These allow DiffMerge to launch with different types of initial windows
      and to be invoked by other applications.
      Each usage is summarized in the following sections.</para>
    <para>DiffMerge Command Flags/Options have a long and short form and may
      either be prefixed by a '<code>/</code>' or a '<code>-</code>'
      depending upon your platform. For example: <code>-h</code>, <code>-help</code>,
      <code>--help</code>, <code>/h</code>, or <code>/help</code>.</para>
    <para>For options that require a value, they must have a COLON, EQUAL, or SPACE
      separator character between the keyword and the value. And the value should be
      quoted if it contains spaces or special characters.
      For example, <code>/caption="Hello World!"</code>.</para>
    <para>Generally, DiffMerge will exit with 0 status when there are no errors
      and a 3 status when there is a command line syntax error.</para>

    <section xml:id="sec__clargs__empty">
      <title>Opening an Empty Window</title>

      <para><emphasis role="bold">Synopsis</emphasis></para>
      <cmdsynopsis>
	<command>diffmerge</command>
      </cmdsynopsis>

      <para>Opens an empty DiffMerge Window.</para>

      <para><emphasis role="bold">Exit Status</emphasis></para>
      <para>Always exits with exit status OK (0) or SYNTAX-ERROR (3).</para>
    </section>

    <section xml:id="sec__clargs__diff">
      <title>Opening a Diff Window</title>

      <para><emphasis role="bold">Synopsis</emphasis></para>
      <cmdsynopsis>
	<command>diffmerge</command>
	<arg choice="opt">-caption<replaceable>=caption</replaceable></arg>
	<arg choice="opt">-ro2</arg>
	<arg choice="opt">-shex</arg>
	<arg choice="opt">-t1<replaceable>=title1</replaceable></arg>
	<arg choice="opt">-t2<replaceable>=title2</replaceable></arg>
	<arg choice="req"><replaceable>file1</replaceable></arg>
	<arg choice="opt"><replaceable>file2</replaceable></arg>
      </cmdsynopsis>

      <para>
	Opens a File Diff Window with the given files.  If only one file is
	given, you will be prompted for the second.  <emphasis>File1</emphasis>
	will appear in the left panel; <emphasis>file2</emphasis> will appear
	in the right panel.
      </para>
      <para>
	If you do not specify <code>/ro2</code>, <emphasis>file2</emphasis> will
	be editable and you can apply patches to it from <emphasis>file1</emphasis>.
      </para>
      <para/>

      <cmdsynopsis>
	<command>diffmerge</command>
	<arg choice="opt">-caption<replaceable>=caption</replaceable></arg>
	<arg choice="opt">-shex</arg>
	<arg choice="opt">-t1<replaceable>=title1</replaceable></arg>
	<arg choice="opt">-t2<replaceable>=title2</replaceable></arg>
	<arg choice="req"><replaceable>folder1</replaceable></arg>
	<arg choice="opt"><replaceable>folder2</replaceable></arg>
      </cmdsynopsis>
      <para>
	Opens a Folder Diff Window with the given folders.  If only one folder
	is given, you will be prompted for the second.  <emphasis>Folder1</emphasis>
	will appear in the left panel; <emphasis>folder2</emphasis> will appear
	in the right panel.
      </para>

      <para xml:id="sec__clargs__diff__flags"><emphasis role="bold">Flags</emphasis></para>
      <para>
	<emphasis role="bold">-c</emphasis>,
	<emphasis role="bold">-caption</emphasis>=<emphasis>message</emphasis>
      </para>
      <para>
	A caption for the application title bar of the first window.
      </para>
      <para>
	<emphasis role="bold">-ro2</emphasis>
      </para>
      <para>
	Treat <emphasis>file2</emphasis> as read-only.
      </para>
      <para>
	<emphasis role="bold">-shex</emphasis> <emphasis>(Windows only)</emphasis>
      </para>
      <para>
	<emphasis>This is used by the Windows Shell/Explorer Integration feature.</emphasis>
	This option forces the Open Files or Folders dialog to appear (even when not
	necessary) before opening the first window to allow you the opportunity to
	swap the pathnames if necessary.
      </para>
      <para xml:id="clarg_title1">
	<emphasis role="bold">-t1</emphasis>,
	<emphasis role="bold">-title1</emphasis>=<emphasis>message</emphasis>
      </para>
      <para>
	Sets the File Panel Lable for the first file/column.
      </para>
      <para xml:id="clarg_title2">
	<emphasis role="bold">-t2</emphasis>,
	<emphasis role="bold">-title2</emphasis>=<emphasis>message</emphasis>
      </para>
      <para>
	Sets the File Panel Lable for the second file/column.
      </para>

      <para><emphasis role="bold">Exit Status</emphasis></para>
      <para>Always exits with exit status OK (0) or SYNTAX-ERROR (3).</para>
    </section>

    <section xml:id="sec__clargs__merge">
      <title>Opening a Merge Window</title>

      <para><emphasis role="bold">Synopsis</emphasis></para>
      <cmdsynopsis>
	<command>diffmerge</command>
	<arg choice="opt">-caption<replaceable>=caption</replaceable></arg>
	<arg choice="opt">-merge</arg>
	<arg choice="opt">-result<replaceable>=resultfile</replaceable></arg>
	<arg choice="opt">-ro2</arg>
	<arg choice="opt">-shex</arg>
	<arg choice="opt">-t1<replaceable>=title1</replaceable></arg>
	<arg choice="opt">-t2<replaceable>=title2</replaceable></arg>
	<arg choice="opt">-t3<replaceable>=title3</replaceable></arg>
	<arg choice="req"><replaceable>file1</replaceable></arg>
	<arg choice="req"><replaceable>file2</replaceable></arg>
	<arg choice="req"><replaceable>file3</replaceable></arg>
      </cmdsynopsis>
	
      <para>
	Open a File Merge Window with the 3 given files.
	<emphasis>File1</emphasis> will appear in the left panel and is traditionally
	set to your version of the file.
	<emphasis>File2</emphasis> will appear in the center panel and should be
	the common ancestor of the other 2 files.
	<emphasis>File3</emphasis> will appear in the right panel and is traditionally
	set to the repository version of the file.
      </para>

      <para>
	If you do not specify <code>/ro2</code>, <emphasis>file2</emphasis> will
	be editable and you can apply patches to it from <emphasis>file1</emphasis> or
	<emphasis>file3</emphasis>.
      </para>

      <para xml:id="sec__clargs__merge__flags"><emphasis role="bold">Flags</emphasis></para>
      <para>
	<emphasis role="bold">-m</emphasis>,
	<emphasis role="bold">-merge</emphasis>
      </para>
      <para>
	Runs <link linkend="sec__file__editing_automerge">Auto-Merge</link> immediately
	after loading the files.
      </para>
      <para xml:id="clarg_result">
	<emphasis role="bold">-r</emphasis>,
	<emphasis role="bold">-result</emphasis>=<emphasis>pathname</emphasis>
      </para>
      <para>
	Specifies a pathname for saving the merge result.  It omitted, the merge
	result (if saved) will overwrite the center file.  
	<emphasis role="bold">This flag causes DiffMerge to return an exit status based
	upon the merge result in the window.</emphasis>
      </para>
      <para xml:id="clarg_title3">
	<emphasis role="bold">-t3</emphasis>,
	<emphasis role="bold">-title3</emphasis>=<emphasis>message</emphasis>
      </para>
      <para>
	Sets the File Panel Lable for the third file/column.
      </para>
      <para>
	The meanings of the other flags are described in the
	<link linkend="sec__clargs__diff__flags">Flags for Opening a Diff Window</link>.
      </para>

      <para><emphasis role="bold">Exit Status</emphasis></para>
      <para>
	When <code>/result</code> is not used, DiffMerge exits with exit status
	OK (0) or SYNTAX-ERROR (3) as usual.
      </para>
	
      <para>
	When <code>/result</code> is used, DiffMerge sets the exit status to reflect
	the state of the merge:
      </para>
      <para>
	<emphasis role="bold">0:</emphasis>   MERGE-RESOLVED - you saved the merge result.
	<emphasis>This does not mean that there are no conflicts remaining; it only means that
	you looked at the files, made whatever edits were necessary, and saved your edits
	into the result file.</emphasis>
      </para>
      <para>
	<emphasis role="bold">1:</emphasis>   MERGE-ABORTED - you gave up the merge by not
	saving your changes.
	<emphasis>This means that you either never saved your edits into the result file
	or that you closed the window with unsaved edits (possibly after a checkpoint save).</emphasis>
      </para>
      <para>
	<emphasis role="bold">2:</emphasis>   FILE-ERROR - there were file errors/problems that prevented
	the merge window from being shown.
      </para>
      <para>
	<emphasis role="bold">3:</emphasis>   SYNTAX-ERROR - there were syntax errors with the
	command line arguments.
      </para>
    </section>
      
    <section xml:id="sec__clargs__help">
      <title>Showing Help</title>

      <para><emphasis role="bold">Synopsis</emphasis></para>
      <cmdsynopsis>
	<command>diffmerge</command>
	<arg choice="req">-help</arg>
      </cmdsynopsis>

      <para>Show the DiffMerge Help Dialog and exit.</para>

      <para><emphasis role="bold">Exit Status</emphasis></para>
      <para>Always exits with exit status OK (0) or SYNTAX-ERROR (3).</para>
    </section>

    <section xml:id="sec__clargs__difffilestofile">
      <title>Diffing Files to a File</title>

      <para><emphasis role="bold">Synopsis</emphasis></para>
      <cmdsynopsis>
	<command>diffmerge</command>
	<arg choice="req">-d<replaceable>=diffoutput</replaceable></arg>
	<arg choice="opt">-u</arg>
	<arg choice="opt">-i</arg>
	<!-- For now -html, -intraline, -side_by_side are debug only and not documented. -->
	<arg choice="req"><replaceable>file1</replaceable></arg>
	<arg choice="req"><replaceable>file2</replaceable></arg>
      </cmdsynopsis>

      <para>
	Compare 2 files and write the differences
	to a file (without opening a window).
      </para>
      <para>
	DiffMerge will use the Ruleset settings and the file suffixes to
	<emphasis>try</emphasis> to automatically select a Ruleset; if it cannot
	automatically pick one, DiffMerge will fall-back to the Default Ruleset.
      </para>
      <para>
	DiffMerge will use the Ruleset's settings from the Character Encoding,
	Lines to Omit, and Line Handling Pages.  When appropriate, it will use
	the last interactively selected tab size.
      </para>
      <para>
	Since the output will be reported in lines, the Detail Level and the
	Ruleset's settings on the Content Handling Page are not relevant.
      </para>

      <para xml:id="sec__clargs__difffiletofile__flags"><emphasis role="bold">Flags</emphasis></para>
      <!-- I give up trying to format these switches using either a table or
	   a variablelist.  One displays fine in the CHM but sucks in the PDF;
	   one displays fine in the PDF and sucks in the CHM.
      -->
      <para>
	<emphasis role="bold">-d</emphasis>,
	<emphasis role="bold">-diff</emphasis>=<emphasis>pathname</emphasis>
      </para>
      <para>
	Compare 2 files and write the results to this pathname.
	The file is only created if there are differences to report.
      </para>

      <para>
	<emphasis role="bold">-u</emphasis>,
	<emphasis role="bold">-unified</emphasis>
      </para>
      <para>
	If there are differences, write them in Unified Format rather than Tranditional Format.
      </para>

      <para>
	<emphasis role="bold">-i</emphasis>,
	<emphasis role="bold">-ignore_unimportant</emphasis>
      </para>
      <para>
	Suppress "Unimportant" changes by enabling "Hide Unimportant".
	<emphasis>
	  Note that this feature can cause the reported diffs to
	  appear slightly differently which may confuse programs like "patch".
	  So it is best to only use this option for personal use.
	</emphasis>
      </para>

      <para><emphasis role="bold">Exit Status</emphasis></para>
      <para>
	When diffing files to a file, DiffMerge sets the exit status to:
      </para>
      <para>
	<emphasis role="bold">0:</emphasis>   IDENTICAL - the input files are identical
	<emphasis>(and the output file is not created)</emphasis>.
      </para>
      <para>
	<emphasis role="bold">1:</emphasis>   DIFFERENT - the input files are different
	<emphasis>(and the differences are written to the output file)</emphasis>.
      </para>
      <para>
	<emphasis role="bold">2:</emphasis>   FILE-ERROR - there were file errors that prevented
	the files from being compared; this includes
	file I/O errors and problems detecting the character encoding of the input files.
      </para>
      <para>
	<emphasis role="bold">3:</emphasis>   SYNTAX-ERROR - there were syntax errors with the
	command line arguments.
      </para>
    </section>

    <section xml:id="sec__clargs__difffolderstofile">
      <title>Diffing Folders to a File</title>

      <para><emphasis role="bold">Synopsis</emphasis></para>
      <cmdsynopsis>
	<command>diffmerge</command>
	<arg choice="req">-diff<replaceable>=diffoutput</replaceable></arg>
	<!-- For now -html, -intraline, -side_by_side are debug only and not documented. -->
	<arg choice="req"><replaceable>folder1</replaceable></arg>
	<arg choice="req"><replaceable>folder2</replaceable></arg>
      </cmdsynopsis>

      <para>
	Compare 2 folders and write the differences
	to a file (without opening a window).
      </para>

      <para xml:id="sec__clargs__difffoldertofile__flags"><emphasis role="bold">Flags</emphasis></para>
      <!-- I give up trying to format these switches using either a table or
	   a variablelist.  One displays fine in the CHM but sucks in the PDF;
	   one displays fine in the PDF and sucks in the CHM.
      -->
      <para>
	<emphasis role="bold">-d</emphasis>,
	<emphasis role="bold">-diff</emphasis>=<emphasis>pathname</emphasis>
      </para>
      <para>
	Compare 2 folders and write the results to this pathname.
	The file is always created even if there are no changes to report.
      </para>

      <para><emphasis role="bold">Exit Status</emphasis></para>
      <para>
	When diffing folders to a file, DiffMerge sets the exit status to:
      </para>
      <para>
	<emphasis role="bold">0:</emphasis>   IDENTICAL - the 2 folders are identical.
      </para>
      <para>
	<emphasis role="bold">1:</emphasis>   DIFFERENT - there are changes to report.
      </para>
      <para>
	<emphasis role="bold">2:</emphasis>   FILE-ERROR - there were filesystem errors that prevented
	the folders from being compared.
      </para>
      <para>
	<emphasis role="bold">3:</emphasis>   SYNTAX-ERROR - there were syntax errors with the
	command line arguments.
      </para>
    </section>

  </chapter>

  <!-- ================================================================ -->

  <chapter xml:id="chapter_integration">
    <title>Integration with Third-Party Software</title>
    <para>DiffMerge can be configured as an external compare / merge tool with various third-party
      version control systems.  Usually this just involves formatting the correct command line
      template string in the package’s options dialog or configuration file.  Here are 
      instructions for some popular packages.
    </para>

    <section xml:id="sec__git">
      <title>Git</title>
      <para/>
      <para>
	The <code>git difftool</code> and <code>git mergetool</code>
	commands can be used to launch a variety of external diff and merge tools.
	For background information on configuring Git, see:
      </para>
      <para>
	<link xlink:href="https://www.kernel.org/pub/software/scm/git/docs/git-difftool.html">
	  https://www.kernel.org/pub/software/scm/git/docs/git-difftool.html
	</link>
      </para>
      <para>
	<link xlink:href="https://www.kernel.org/pub/software/scm/git/docs/git-mergetool.html">
	  https://www.kernel.org/pub/software/scm/git/docs/git-mergetool.html
	</link>
      </para>

      <section xml:id="sec__git__mac">
	<title>Settings for OS X</title>
	<para>
	  First confirm that <code>/usr/local/bin/diffmerge</code> is present.
	  If you used the PKG Installer, this was installed when /Applications/DiffMerge.app was installed.
	  If you used the DMG file, refer to the instructions for installing the
	  <link linkend="sec__inst__mac__extras">Extras</link>.
	</para>
	<para>
	  The following commands will update your <code>.gitconfig</code> to let Git use DiffMerge:
	  <programlisting>
$ git config --global diff.tool diffmerge
$ git config --global difftool.diffmerge.cmd
    "/usr/local/bin/diffmerge \"\$LOCAL\" \"\$REMOTE\""

$ git config --global merge.tool diffmerge
$ git config --global mergetool.diffmerge.trustExitCode true
$ git config --global mergetool.diffmerge.cmd 
    "/usr/local/bin/diffmerge --merge --result=\"\$MERGED\"
        \"\$LOCAL\" \"\$BASE\" \"\$REMOTE\""
	  </programlisting>
	</para>
      </section>

      <section xml:id="sec__git__linux">
	<title>Settings for Linux</title>
	<para>
	  The following commands will update your <code>.gitconfig</code> to let Git use DiffMerge:
	  <programlisting>
$ git config --global diff.tool diffmerge
$ git config --global difftool.diffmerge.cmd
    "/usr/bin/diffmerge \"\$LOCAL\" \"\$REMOTE\""

$ git config --global merge.tool diffmerge
$ git config --global mergetool.diffmerge.trustExitCode true
$ git config --global mergetool.diffmerge.cmd 
    "/usr/bin/diffmerge --merge --result=\"\$MERGED\"
        \"\$LOCAL\" \"\$BASE\" \"\$REMOTE\""
	  </programlisting>
	</para>
      </section>

      <section xml:id="sec__git__windows">
	<title>Settings for Windows</title>
	<para>
	  On Windows, the actual configuration settings depend upon which
	  distribution of Git you are using.
	</para>

	<section xml:id="sec__git__windows__github">
	  <title>GitHub for Windows or Git Bash Shell</title>
	  <para>
	    <emphasis>
	      The following is based upon the 1.0 release of
	      <link xlink:href="http://windows.github.com/">GitHub for Windows or Git Bash Shell</link>.
	    </emphasis>
	  </para>
	  <para>
	    <emphasis>
	      Since GitHub for Windows is built upon a version of the
	      Git for Windows (MSysGit) package, the 
	      <code>Command Prompt</code> commands
	      in the following section could also be used.
	      The acutal configuration file settings are provided
	      here to avoid various command line quoting issues in
	      the various shells available to you.
	    </emphasis>
	  </para>
	  <para>
	    Add the following lines to your <code>.gitconfig</code>.
	    This file should be in your home directory in <code>C:\Users</code>:
	    <programlisting>
[diff]
    tool = diffmerge
[difftool "diffmerge"]
    cmd = C:/Program\\ Files/SourceGear/Common/DiffMerge/sgdm.exe
        \"$LOCAL\" \"$REMOTE\"

[merge]
    tool = diffmerge
[mergetool "diffmerge"]
    trustExitCode = true
    cmd = C:/Program\\ Files/SourceGear/Common/DiffMerge/sgdm.exe
        -merge -result=\"$MERGED\" \"$LOCAL\" \"$BASE\" \"$REMOTE\"
	    </programlisting>
	  </para>
	  <para>
	    <emphasis>
	      Note that both of the <code>cmd = ...</code> lines
	      were wrapped for this document and should appear as
	      a single line in your <code>.gitconfig</code> file.
	      You can verify your settings with the <code>git config --list</code> command.
	    </emphasis>
	  </para>
	  <para>
	    <emphasis>
	      The pathnames above assume that the MSI installer was used to 
	      install DiffMerge in the standard location.
	      If you installed DiffMerge from the ZIP package, be sure to
	      adjust the pathname to <code>sgdm.exe</code> accordingly.
	    </emphasis>
	  </para>
	</section>

	<section xml:id="sec__git__windows__msysgit">
	  <title>Git for Windows (MSysGit) or Git Cmd</title>
	  <para>
	    The following commands in a <code>Command Prompt</code> window will update 
	    your <code>.gitconfig</code> to configure Git use DiffMerge:
	    <programlisting>
C:\> git config --global diff.tool diffmerge
C:\> git config --global difftool.diffmerge.cmd
    "C:/Program\ Files/SourceGear/Common/DiffMerge/sgdm.exe
        \"$LOCAL\" \"$REMOTE\""

C:\> git config --global merge.tool diffmerge
C:\> git config --global mergetool.diffmerge.trustExitCode true
C:\> git config --global mergetool.diffmerge.cmd 
    "C:/Program\ Files/SourceGear/Common/DiffMerge/sgdm.exe
        -merge -result=\"$MERGED\" \"$LOCAL\" \"$BASE\" \"$REMOTE\""
	    </programlisting>
	  </para>
	  
	  <para> 
		This will also work for the Gitcmd that is offered on the Git website, but not the Git Bash shell.
	  </para>
	  <para>
	    <emphasis>
	      Note that both of the <code>....diffmerge.cmd ...</code> lines
	      were wrapped for this document.
	      You can verify your settings with the <code>git config --list</code> command.
	    </emphasis>
	  </para>
	  <para>
	    The commands above assume that the MSI installer was used to 
	    install DiffMerge in the standard location.
	    If you installed DiffMerge from the ZIP package, be sure to
	    adjust the pathname to <code>sgdm.exe</code> accordingly.
	  </para>
	</section>
      
	<section xml:id="sec__git__windows__cygwin">
	  <title>Git Under Cygwin or Git Bash Shell</title>
	  <para>
	    <emphasis>
	      The following instructions are for the version of Git
	      included with Cygwin or the default Git Bash Shell. The following commands are run
	      from a cygwin bash shell window.
	    </emphasis>
	  </para>
	  <para>
	    This version of Git invokes external diff/merge tools using
	    cygwin-style pathnames, such as <code>/tmp/foo</code> (which
	    is relative to the root of the cygwin directory).
	    These pathnames are not understood by DiffMerge.  A shell script
	    wrapper <code>sgdm_cygwin.sh</code> has been provided (in the
	    same directory as the <code>sgdm.exe</code> executable) to
	    translate these pathnames and launch DiffMerge.
	  </para>
	  <para>
	    The following commands will update your <code>.gitconfig</code> to let the Cygwin version of Git use DiffMerge:
	    <programlisting>
$ git config --global diff.tool diffmerge
$ git config --global difftool.diffmerge.cmd
    "C:/Program\ Files/SourceGear/Common/DiffMerge/sgdm_cygwin.sh
        -p1=\"\$LOCAL\" -p2=\"\$REMOTE\""
	      
$ git config --global merge.tool diffmerge
$ git config --global mergetool.diffmerge.trustExitCode true
$ git config --global mergetool.diffmerge.cmd 
    "C:/Program\ Files/SourceGear/Common/DiffMerge/sgdm_cygwin.sh
        -merge -result=\"\$MERGED\"
            -p1=\"\$LOCAL\" -p2=\"\$BASE\" -p3=\"\$REMOTE\""
	    </programlisting>
	  </para>
	  <para>
	    <emphasis>
	      Note that both of the <code>....diffmerge.cmd ...</code> lines
	      were wrapped for this document.
	      You can verify your settings with the <code>git config --list</code> command.
	    </emphasis>
	  </para>
	  <para>
	    <emphasis role="bold">
	      Note that each of the input pathnames is associated with 
	      a <code>/pX=</code> option instead of being an unbound
	      parameter.
	    </emphasis>
	  </para>
	  <para>
	    The commands above assume that the MSI installer was used to 
	    install DiffMerge in the standard location.
	    If you installed DiffMerge from the ZIP package, be sure to
	    adjust the pathname to <code>sgdm.exe</code> accordingly.
	  </para>
	</section>
      </section>
    </section>


    <section xml:id="sec__mercurial">
      <title>Mercurial (Hg)</title>
      <para>Information on configuring an external diff/merge tool can be found in:</para>
      <para>
	<link
	   xlink:href="http://www.selenic.com/mercurial/wiki/MergeToolConfiguration"
	   >http://www.selenic.com/mercurial/wiki/MergeToolConfiguration</link>
      </para>
      <para>
	<link
	   xlink:href="http://www.selenic.com/mercurial/wiki/index.cgi/MergeProgram"
	   >http://www.selenic.com/mercurial/wiki/index.cgi/MergeProgram</link>
	</para>
      <para>
	<link
	   xlink:href="http://www.selenic.com/mercurial/wiki/ExtdiffExtension"
	   >http://www.selenic.com/mercurial/wiki/ExtdiffExtension</link>
      </para>

      <para>The command for comparing 2 versions of a file is <code>hg diff foo.c</code>.
	This will compare the baseline and working-folder versions of foo.c and print
	unified-diffs in the terminal window.  If you add the settings below to
	your <code>mercurial.ini</code> or <code>.hgrc</code> file, you can
	type <code>hg diffmerge foo.c</code> and
	have DiffMerge launched to compare the 2 file versions.
      </para>

      <para>The <code>hg merge</code> and <code>hg resolve</code> commands will
	merge files.  When the settings below are added, Mercurial will try to use
	DiffMerge to perform the merge.  There are lots of Mercurial options to
	control how external merge tools are selected (based upon priority and
	file type).  Please see the above references for configuration options.
      </para>

      <section xml:id="sec__mercurial__linux">
	<title>Settings for Linux</title>
	<para>
	  First confirm that <code>/usr/bin/diffmerge</code>
	  is present.
	  On Linux, this should have been installed for you.
	</para>

	<para>Add the following lines to your <code>.hgrc</code>:</para>
	<para>
	  <programlisting>
[extensions]
hgext.extdiff =

[extdiff]
cmd.diffmerge = /usr/bin/diffmerge

[merge-tools]
diffmerge.executable = /usr/bin/diffmerge
diffmerge.args = --result=$output  $local $base $other
diffmerge.binary = False
diffmerge.symlinks = False
diffmerge.gui = True
diffmerge.premerge = True
	  </programlisting>
	</para>
      </section>

      <section xml:id="sec__mercurial__mac">
	<title>Settings for OS X</title>
	<para>
	  First confirm that <code>/usr/local/bin/diffmerge</code> is present.
	  If you used the PKG Installer, this was installed 
	  when /Applications/DiffMerge.app was installed.
	  If you used the DMG file, refer to the instructions for installing the
	  <link linkend="sec__inst__mac__extras">Extras</link>.
	</para>

	<para>Add the following lines to your <code>.hgrc</code>:</para>
	<para>
	  <programlisting>
[extensions]
hgext.extdiff =

[extdiff]
cmd.diffmerge = /usr/local/bin/diffmerge

[merge-tools]
diffmerge.executable = /usr/local/bin/diffmerge
diffmerge.args = --result=$output  $local $base $other
diffmerge.binary = False
diffmerge.symlinks = False
diffmerge.gui = True
diffmerge.premerge = True
	  </programlisting>
	</para>
      </section>

      <section xml:id="sec__mercurial__windows">
	<title>Settings for Windows</title>
	<para>
	  On Windows, the actual configuration settings depend upon which
	  distribution of Mercurial you are using.
	</para>

	<section xml:id="sec__mercurial__windows__native">
	  <title>Mercurial for Windows</title>
	  <para>Add the following lines to your <code>mercurial.ini</code> file:</para>
	  <para>
	    <programlisting>
[extensions]
hgext.extdiff =

[extdiff]
cmd.diffmerge = C:\Program Files\SourceGear\Common\DiffMerge\sgdm.exe

[merge-tools]
diffmerge.executable = C:\Program Files\SourceGear\Common\DiffMerge\sgdm.exe
diffmerge.args = -merge -result=$output  $local $base $other
diffmerge.binary = False
diffmerge.symlinks = False
diffmerge.gui = True
diffmerge.premerge = True
	    </programlisting>
	  </para>
	</section>
	<section xml:id="sec__mercurial__windows__cygwin">
	  <title>Mercurial Under Cygwin</title>
	  <para>
	    <emphasis>
	      The following instructions are for the version of Mercurial
	      included with Cygwin. The following commands are run
	      from a cygwin bash shell window.
	    </emphasis>
	  </para>
	  <para>
	    This version of Mercurial invokes external diff/merge tools using
	    cygwin-style pathnames, such as <code>/tmp/foo</code> (which
	    is relative to the root of the cygwin directory).
	    These pathnames are not understood by DiffMerge.  A shell script
	    wrapper <code>sgdm_cygwin.sh</code> has been provided (in the
	    same directory as the <code>sgdm.exe</code> executable) to
	    translate these pathnames and launch DiffMerge.
	  </para>

	  <para>
	    <programlisting>
[extensions]
hgext.extdiff =

[extdiff]
cmd.diffmerge = C:/Program Files/SourceGear/Common/DiffMerge/sgdm_cygwin.sh

[merge-tools]
diffmerge.executable = C:/Program Files/SourceGear/Common/DiffMerge/sgdm_cygwin.sh
diffmerge.args = -merge -result=$output  -p1=$local -p2=$base -p3=$other
diffmerge.binary = False
diffmerge.symlinks = False
diffmerge.gui = True
diffmerge.premerge = True
	    </programlisting>
	  </para>
	  <para>
	    <emphasis role="bold">
	      Note that each of the input pathnames is associated with 
	      a <code>/pX=</code> option instead of being an unbound
	      parameter.
	    </emphasis>
	  </para>
	</section>
      </section>

      <section xml:id="sec__mercurial__tips">
	<title>Mercurial Tips</title>
	<itemizedlist>
	  <listitem>
	    <para>It is <emphasis role="bold">very important</emphasis>
	      that the <code>--result=$output</code> argument be present.
	      Without this, DiffMerge will not set the exit status as Mercurial expects and it will
	      save the merge result in the original file, which in this case is a Mercurial temporary
	      file.
	    </para>
	  </listitem>
	  <listitem>
	    <para>If you want, you can add:</para>
	    <para><code>-t1="Local Version" -t2=$output -t3="Other Version" --caption=$output</code></para>
	    <para>to the <code>diffmerge.args</code> line.  This will give you better window titles.</para>
	  </listitem>
	</itemizedlist>
      </section>
    </section>


  </chapter>

</book>
